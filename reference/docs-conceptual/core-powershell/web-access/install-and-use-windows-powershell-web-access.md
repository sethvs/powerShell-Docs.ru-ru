---
ms.date: 2017-08-23
keywords: "powershell,командлет"
title: "Установка и использование Windows PowerShell Web Access"
ms.openlocfilehash: d30bacea8f0edb62e6bb42c118e54010d5401467
ms.sourcegitcommit: 4102ecc35d473211f50a453f6ae3fbea31cb3428
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/31/2017
---
# <a name="install-and-use-windows-powershell-web-access"></a><span data-ttu-id="ce362-103">Установка и использование Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="ce362-103">Install and Use Windows PowerShell Web Access</span></span>

<span data-ttu-id="ce362-104">Обновлено: 5 ноября 2013 г. (изменено: 23 августа 2017 г.)</span><span class="sxs-lookup"><span data-stu-id="ce362-104">Updated: November 5, 2013 (Edited: August 23, 2017)</span></span>

<span data-ttu-id="ce362-105">Область применения: Windows Server 2012 R2, Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="ce362-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

## <a name="introduction"></a><span data-ttu-id="ce362-106">Введение</span><span class="sxs-lookup"><span data-stu-id="ce362-106">Introduction</span></span>

<span data-ttu-id="ce362-107">Компонент Windows PowerShell Web Access, впервые представленный в Windows Server 2012, действует как шлюз Windows PowerShell, предоставляя веб-консоль Windows PowerShell для удаленного компьютера.</span><span class="sxs-lookup"><span data-stu-id="ce362-107">Windows PowerShell Web Access, first introduced in Windows Server 2012, acts as a Windows PowerShell gateway, providing a web-based Windows PowerShell console that is targeted at a remote computer.</span></span> <span data-ttu-id="ce362-108">Она позволяет ИТ-специалистам выполнять команды и сценарии Windows PowerShell с консоли Windows PowerShell в веб-браузере без установки Windows PowerShell, программ для удаленного управления или подключаемых модулей браузера, необходимых на устройстве клиента.</span><span class="sxs-lookup"><span data-stu-id="ce362-108">It enables IT Pros to run Windows PowerShell commands and scripts from a Windows PowerShell console in a web browser, with no Windows PowerShell, remote management software, or browser plug-in installation necessary on the client device.</span></span> <span data-ttu-id="ce362-109">Для работы веб-консоли Windows PowerShell требуется только правильно настроенный шлюз Windows PowerShell и браузер на устройстве клиента, который поддерживает JavaScript® и принимает cookie-файлы.</span><span class="sxs-lookup"><span data-stu-id="ce362-109">All that is required to run the web-based Windows PowerShell console is a properly-configured Windows PowerShell Web Access gateway, and a client device browser that supports JavaScriptÂ® and accepts cookies.</span></span>

<span data-ttu-id="ce362-110">Примерами клиентских устройств могут служить ноутбуки, персональные компьютеры, не являющиеся служебными, арендованные компьютеры, планшетные компьютеры, веб-киоски, компьютеры без операционной системы на базе Windows и браузеры сотовых телефонов.</span><span class="sxs-lookup"><span data-stu-id="ce362-110">Examples of client devices include laptops, non-work personal computers, borrowed computers, tablet computers, web kiosks, computers that are not running a Windows-based operating system, and cell phone browsers.</span></span> <span data-ttu-id="ce362-111">ИТ-специалисты могут выполнять важные задачи управления на удаленных серверах на базе ОС Windows с устройств, имеющих доступ к Интернету и веб-браузер.</span><span class="sxs-lookup"><span data-stu-id="ce362-111">IT Pros can perform critical management tasks on remote Windows-based servers from devices that have access to an Internet connection and a web browser.</span></span>

<span data-ttu-id="ce362-112">После успешной установки и настройки шлюза пользователи получают доступ к консоли Windows PowerShell с помощью веб-браузера.</span><span class="sxs-lookup"><span data-stu-id="ce362-112">After successful gateway setup and configuration, users can access a Windows PowerShell console by using a web browser.</span></span> <span data-ttu-id="ce362-113">Пользователи, открывающие защищенный веб-сайт Windows PowerShell, могут запускать веб-консоль Windows PowerShell после успешной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="ce362-113">When users open the secured Windows PowerShell Web Access website, they can run a web-based Windows PowerShell console after successful authentication.</span></span>

<span data-ttu-id="ce362-114">Для установки и настройки Windows PowerShell Web Access требуются три шага.</span><span class="sxs-lookup"><span data-stu-id="ce362-114">Windows PowerShell Web Access setup and configuration is a three-step process:</span></span>

1. [<span data-ttu-id="ce362-115">установка windows powershell web access</span><span class="sxs-lookup"><span data-stu-id="ce362-115">install windows powershell web access</span></span>]()
2. [<span data-ttu-id="ce362-116">настройка шлюза</span><span class="sxs-lookup"><span data-stu-id="ce362-116">configure the gateway</span></span>]()
3. [<span data-ttu-id="ce362-117">настройка правил авторизации</span><span class="sxs-lookup"><span data-stu-id="ce362-117">configure authorization rules</span></span>]()

<span data-ttu-id="ce362-118">Перед установкой и настройкой Windows PowerShell Web Access рекомендуется внимательно ознакомиться с этим руководством, поскольку здесь содержатся инструкции по установке, удалению и обеспечению безопасности Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-118">Before you install and configure Windows PowerShell Web Access, we recommend that you read this entire guide, which includes instructions about how to install, secure, and uninstall Windows PowerShell Web Access.</span></span>
<span data-ttu-id="ce362-119">В разделе [Использование веб-консоли Windows PowerShell](https://technet.microsoft.com/en-us/library/hh831417(v=ws.11).aspx) описан вход пользователей в веб-консоль, представлены ограничения и различия между веб-консолью Windows PowerShell и консолью **powershell.exe**.</span><span class="sxs-lookup"><span data-stu-id="ce362-119">The [Use the Web-based Windows PowerShell Console](https://technet.microsoft.com/en-us/library/hh831417(v=ws.11).aspx) topic describes how users sign in to the web-based console, and covers limitations and differences between the web-based Windows PowerShell console and the **powershell.exe** console.</span></span> <span data-ttu-id="ce362-120">Конечным пользователям веб-консоли необходимо ознакомиться со статьей [Использование веб-консоли Windows PowerShell](use-the-web-based-windows-powershell-console.md), но нет необходимости читать остальное руководство.</span><span class="sxs-lookup"><span data-stu-id="ce362-120">End users of the web-based console should read [Use the Web based Windows PowerShell Console](use-the-web-based-windows-powershell-console.md), but do not need to read the rest of this guide.</span></span>

<span data-ttu-id="ce362-121">В этой статье не приводятся подробные рекомендации по работе с веб-сервером IIS. Описаны только шаги, необходимые для настройки шлюза Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-121">This topic does not provide in-depth IIS Web Server operations guidance; only those steps required to configure the Windows PowerShell Web Access gateway are described in this topic.</span></span> <span data-ttu-id="ce362-122">Дополнительные сведения о настройке и обеспечении безопасности веб-сайтов в IIS см. в документации по IIS (в разделе "См. также").</span><span class="sxs-lookup"><span data-stu-id="ce362-122">For more information about configuring and securing websites in IIS, see the IIS documentation resources in the See Also section.</span></span>

<span data-ttu-id="ce362-123">Следующая схема демонстрирует работу Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-123">The following diagram shows how Windows PowerShell Web Access works.</span></span>

![Схема Windows PowerShell Web Access](images/Windows-PowerShell-Web-Access-diagram.jpg)

## <a name="requirements-for-running-windows-powershell-web-access"></a><span data-ttu-id="ce362-125">Требования для запуска веб-доступа Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="ce362-125">Requirements for running Windows PowerShell Web Access</span></span>

<span data-ttu-id="ce362-126">Для работы Windows PowerShell Web Access необходимо, чтобы веб-сервер (IIS), .NET Framework 4.5 и Windows PowerShell 3.0 или Windows PowerShell 4.0 выполнялись на сервере, на котором предполагается запустить шлюз.</span><span class="sxs-lookup"><span data-stu-id="ce362-126">Windows PowerShell Web Access requires Web Server (IIS), .NET Framework 4.5, and Windows PowerShell 3.0 or Windows PowerShell 4.0 to be running on the server on which you want to run the gateway.</span></span> <span data-ttu-id="ce362-127">Можно установить Windows PowerShell Web Access на сервер под управлением Windows Server 2012 R2 или Windows Server 2012 с помощью мастера добавления ролей и компонентов в диспетчере серверов или командлетов развертывания Windows PowerShell для диспетчера серверов.</span><span class="sxs-lookup"><span data-stu-id="ce362-127">You can install Windows PowerShell Web Access on a server that is running Windows Server 2012 R2 or Windows Server 2012 by using either the Add Roles and Features Wizard in Server Manager, or Windows PowerShell deployment cmdlets for Server Manager.</span></span> <span data-ttu-id="ce362-128">При установке Windows PowerShell Web Access с помощью диспетчера серверов или командлетов развертывания необходимые роли и компоненты добавляются автоматически в процессе установки.</span><span class="sxs-lookup"><span data-stu-id="ce362-128">When you install Windows PowerShell Web Access by using Server Manager or its deployment cmdlets, required roles and features are automatically added as part of the installation process.</span></span>

<span data-ttu-id="ce362-129">Windows PowerShell Web Access позволяет удаленным пользователям получать доступ к компьютерам в вашей организации, используя Windows PowerShell в веб-браузере.</span><span class="sxs-lookup"><span data-stu-id="ce362-129">Windows PowerShell Web Access allows remote users to access computers in your organization by using Windows PowerShell in a web browser.</span></span> <span data-ttu-id="ce362-130">Хотя Windows PowerShell Web Access является удобным и мощным инструментом управления, доступ через Интернет связан с рисками для безопасности и должен настраиваться с максимально возможной безопасностью.</span><span class="sxs-lookup"><span data-stu-id="ce362-130">Although Windows PowerShell Web Access is a convenient and powerful management tool, the web-based access poses security risks, and should be configured as securely as possible.</span></span> <span data-ttu-id="ce362-131">Мы рекомендуем администраторам, настраивающим шлюз Windows PowerShell Web Access, использовать как уровни безопасности, доступные в правилах авторизации на основе командлетов, включаемых в Windows PowerShell Web Access, так и уровни безопасности, доступные в веб-сервере (IIS) и приложениях сторонних производителей.</span><span class="sxs-lookup"><span data-stu-id="ce362-131">We recommend that administrators who configure the Windows PowerShell Web Access gateway use available security layers, both the cmdlet-based authorization rules included with Windows PowerShell Web Access, and security layers that are available in Web Server (IIS) and third-party applications.</span></span> <span data-ttu-id="ce362-132">В данную документацию включены как небезопасные примеры, которые рекомендуются только для тестовых сред, так и примеры, рекомендуемые для безопасного развертывания.</span><span class="sxs-lookup"><span data-stu-id="ce362-132">This documentation includes both unsecure examples that are only recommended for test environments, as well as examples that are recommended for secure deployments.</span></span>

## <a name="browser-and-client-device-support"></a><span data-ttu-id="ce362-133">Поддержка браузеров и клиентских устройств</span><span class="sxs-lookup"><span data-stu-id="ce362-133">Browser and client device support</span></span>

<span data-ttu-id="ce362-134">Windows PowerShell Web Access поддерживает перечисленные ниже веб-браузеры.</span><span class="sxs-lookup"><span data-stu-id="ce362-134">Windows PowerShell Web Access supports the following Internet browsers.</span></span>
<span data-ttu-id="ce362-135">Хотя браузеры для мобильных устройств официально не поддерживаются, многие из них могут выполнять веб-консоль Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ce362-135">Although mobile browsers are not officially supported, many may be able to run the web-based Windows PowerShell console.</span></span> <span data-ttu-id="ce362-136">Ожидается, что другие браузеры, которые принимают куки-файлы, выполняют JavaScript и выполняют веб-сайты HTTPS, также будут работать, но официально они не протестированы.</span><span class="sxs-lookup"><span data-stu-id="ce362-136">Other browsers that accept cookies, run JavaScript, and run HTTPS websites are expected to work, but are not officially tested.</span></span>

### <a name="supported-desktop-computer-browsers"></a><span data-ttu-id="ce362-137">Поддерживаемые браузеры для настольных компьютеров</span><span class="sxs-lookup"><span data-stu-id="ce362-137">Supported desktop computer browsers</span></span>

- <span data-ttu-id="ce362-138">Windows Internet Explorer для Microsoft Windows 8.0, 9.0, 10.0 и 11.0</span><span class="sxs-lookup"><span data-stu-id="ce362-138">Windows Internet Explorer for Microsoft Windows 8.0, 9.0, 10.0, and 11.0</span></span>
- <span data-ttu-id="ce362-139">Mozilla Firefox 10.0.2</span><span class="sxs-lookup"><span data-stu-id="ce362-139">Mozilla Firefox 10.0.2</span></span>
- <span data-ttu-id="ce362-140">Google Chrome 17.0.963.56m для Windows</span><span class="sxs-lookup"><span data-stu-id="ce362-140">Google Chromeâ 17.0.963.56m for Windows</span></span>
- <span data-ttu-id="ce362-141">Apple Safari 5.1.2 для Windows</span><span class="sxs-lookup"><span data-stu-id="ce362-141">Apple Safari 5.1.2 for Windows</span></span>
- <span data-ttu-id="ce362-142">Apple Safari 5.1.2 для Mac OS</span><span class="sxs-lookup"><span data-stu-id="ce362-142">Apple Safari 5.1.2 for Mac OS</span></span>

### <a name="minimally-tested-mobile-devices-or-browsers"></a><span data-ttu-id="ce362-143">Минимально протестированные мобильные устройства или браузеры</span><span class="sxs-lookup"><span data-stu-id="ce362-143">Minimally-tested mobile devices or browsers</span></span>

- <span data-ttu-id="ce362-144">Windows Phone 7 и 7.5</span><span class="sxs-lookup"><span data-stu-id="ce362-144">WindowsÂ Phone 7 and 7.5</span></span>
- <span data-ttu-id="ce362-145">Google Android WebKit 3.1 Browser Android 2.2.1 (Kernel 2.6)</span><span class="sxs-lookup"><span data-stu-id="ce362-145">Google Android WebKit 3.1 BrowserÂ Android 2.2.1 (Kernel 2.6)</span></span>
- <span data-ttu-id="ce362-146">Apple Safari для операционной системы 5.0.1 для iPhone</span><span class="sxs-lookup"><span data-stu-id="ce362-146">Apple Safari for iPhone operating system 5.0.1</span></span>
- <span data-ttu-id="ce362-147">Apple Safari для операционной системы 5.0.1 для iPad 2</span><span class="sxs-lookup"><span data-stu-id="ce362-147">Apple Safari for iPad 2Â operating system 5.0.1</span></span>

### <a name="browser-requirements"></a><span data-ttu-id="ce362-148">Требования к браузерам</span><span class="sxs-lookup"><span data-stu-id="ce362-148">Browser requirements</span></span>

<span data-ttu-id="ce362-149">Чтобы использовать веб-консоль Windows PowerShell Web Access, браузеры должны иметь следующие возможности.</span><span class="sxs-lookup"><span data-stu-id="ce362-149">To use the Windows PowerShell Web Access web-based console, browsers must do the following.</span></span>

- <span data-ttu-id="ce362-150">Разрешать файлы cookie с веб-сайта шлюза Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-150">Allow cookies from the Windows PowerShell Web Access gateway website.</span></span>
- <span data-ttu-id="ce362-151">Открывать и читать HTTPS-страницы.</span><span class="sxs-lookup"><span data-stu-id="ce362-151">Be able to open and read HTTPS pages.</span></span>
- <span data-ttu-id="ce362-152">Открывать и выполнять веб-сайты, использующие JavaScript.</span><span class="sxs-lookup"><span data-stu-id="ce362-152">Open and run websites that use JavaScript.</span></span>

## <a name="recommended-quick-deployment"></a><span data-ttu-id="ce362-153">Рекомендуемая схема быстрого развертывания</span><span class="sxs-lookup"><span data-stu-id="ce362-153">Recommended quick deployment</span></span>

<span data-ttu-id="ce362-154">Шлюз Windows PowerShell Web Access можно установить на сервер под управлением Windows Server 2012 R2 или Windows Server 2012 с помощью командлетов развертывания Windows PowerShell или мастера добавления ролей и компонентов в диспетчере серверов.</span><span class="sxs-lookup"><span data-stu-id="ce362-154">You can install the Windows PowerShell Web Access gateway on a server that is running Windows Server 2012 R2 or Windows Server 2012 by using either Windows PowerShell cmdlets, or by using the Add Roles and Features Wizard that is opened from within Server Manager.</span></span> <span data-ttu-id="ce362-155">Для быстрой установки и настройки воспользуйтесь командлетами Windows PowerShell, как описано в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="ce362-155">For quick installation and configuration, use Windows PowerShell cmdlets, as described in this section.</span></span>

1. [<span data-ttu-id="ce362-156">Установка Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="ce362-156">Install Windows PowerShell Web Access</span></span>](#install-Windows-powershell-web-access)
1. [<span data-ttu-id="ce362-157">Настройка шлюза</span><span class="sxs-lookup"><span data-stu-id="ce362-157">Configure the Gateway</span></span>](#configure-the-gateway)
1. [<span data-ttu-id="ce362-158">Настройка ограничивающего правила авторизации</span><span class="sxs-lookup"><span data-stu-id="ce362-158">Configure a restrictive authorization rule</span></span>](#configure-a-restrictive-authorization-rule)

### <a name="install-windows-powershell-web-access"></a><span data-ttu-id="ce362-159">Установка Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="ce362-159">Install Windows PowerShell Web Access</span></span>

#### <a name="to-install-windows-powershell-web-access-by-using-windows-powershell-cmdlets"></a><span data-ttu-id="ce362-160">Установка Windows PowerShell Web Access с помощью командлетов Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="ce362-160">To install Windows PowerShell Web Access by using Windows PowerShell cmdlets</span></span>

1. <span data-ttu-id="ce362-161">Выполните одно из следующих действий, чтобы открыть сеанс Windows PowerShell с повышенными правами.</span><span class="sxs-lookup"><span data-stu-id="ce362-161">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>
    - <span data-ttu-id="ce362-162">На рабочем столе Windows щелкните правой кнопкой мыши **Windows PowerShell** на панели задач и выберите команду **Запустить от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="ce362-162">On the Windows desktop, right-click **Windows PowerShell** on the taskbar, and then click **Run as Administrator**.</span></span>
    - <span data-ttu-id="ce362-163">На **начальном экране** Windows щелкните правой кнопкой мыши **Windows PowerShell**, а затем выберите команду **Запустить от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="ce362-163">On the Windows **Start** screen, right-click **Windows PowerShell**, and then click **Run as Administrator**.</span></span>

    ><span data-ttu-id="ce362-164">**![Примечание.](images/note.jpeg) Note** В Windows PowerShell 3.0 и 4.0 не нужно импортировать модуль командлета диспетчера серверов в сеанс Windows PowerShell перед запуском командлетов, которые являются частью этого модуля.</span><span class="sxs-lookup"><span data-stu-id="ce362-164">**![Note](images/note.jpeg) Note** In Windows PowerShell 3.0 and 4.0, there is no need to import the Server Manager cmdlet module into the Windows PowerShell session before running cmdlets that are part of the module.</span></span> <span data-ttu-id="ce362-165">Модуль автоматически импортируется при первом выполнении командлета, входящего в модуль.</span><span class="sxs-lookup"><span data-stu-id="ce362-165">A module is automatically imported the first time you run a cmdlet that is part of the module.</span></span> <span data-ttu-id="ce362-166">Кроме того, командлеты Windows PowerShell не учитывают регистр.</span><span class="sxs-lookup"><span data-stu-id="ce362-166">Also, Windows PowerShell cmdlets are not case-sensitive.</span></span>

1. <span data-ttu-id="ce362-167">Введите следующую команду и нажмите клавишу **ВВОД**, где *computer_name* представляет имя удаленного компьютера, на который требуется установить Windows PowerShell Web Access, если это применимо.</span><span class="sxs-lookup"><span data-stu-id="ce362-167">Type the following, and then press **Enter**, where *computer_name* represents a remote computer on which you want to install Windows PowerShell Web Access, if applicable.</span></span> <span data-ttu-id="ce362-168">Параметр `-Restart` автоматически перезапускает целевой сервер при необходимости.</span><span class="sxs-lookup"><span data-stu-id="ce362-168">The `-Restart` parameter automatically restarts destination servers if required.</span></span>

   `Install-WindowsFeature -Name WindowsPowerShellWebAccess -ComputerName <computer_name> -IncludeManagementTools -Restart`

   ><span data-ttu-id="ce362-169">**![Примечание](images/note.jpeg) Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-169">**![Note](images/note.jpeg) Note**</span></span>
   >
   ><span data-ttu-id="ce362-170">Установка Windows PowerShell Web Access с помощью командлетов Windows PowerShell не добавляет средства управления веб-сервера (IIS) по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ce362-170">Installing Windows PowerShell Web Access by using Windows PowerShell cmdlets does not add Web Server (IIS) management tools by default.</span></span> <span data-ttu-id="ce362-171">Если требуется установить средства управления на тот же сервер, на котором выполняется шлюз Windows PowerShell Web Access, добавьте в команду установки параметр `-IncludeManagementTools` (как указано в этом шаге).</span><span class="sxs-lookup"><span data-stu-id="ce362-171">If you want to install the management tools on the same server as the Windows PowerShell Web Access gateway, add the `-IncludeManagementTools` parameter to the installation command (as provided in this step).</span></span> <span data-ttu-id="ce362-172">Если управление веб-сайтом Windows PowerShell Web Access осуществляется с удаленного компьютера, установите оснастку "Диспетчер служб IIS", установив [Средства удаленного администрирования сервера для Windows 8.1](http://go.microsoft.com/fwlink/?LinkID=304145) или [Средства удаленного администрирования сервера для Windows 8](http://go.microsoft.com/fwlink/p/?LinkID=238560) на компьютере, с которого будет осуществляться управление шлюзом.</span><span class="sxs-lookup"><span data-stu-id="ce362-172">If you are managing the Windows PowerShell Web Access website from a remote computer, install the IIS Manager snap-in by installing [Remote Server Administration Toolsfor Windows 8.1](http://go.microsoft.com/fwlink/?LinkID=304145) or [Remote Server Administration Tools for Windows 8](http://go.microsoft.com/fwlink/p/?LinkID=238560) on the computer from which you want to manage the gateway.</span></span>
   
   <span data-ttu-id="ce362-173">Чтобы установить роли и компоненты на автономный виртуальный жесткий диск (VHD), необходимо добавить оба параметра, `-ComputerName` и `-VHD`.</span><span class="sxs-lookup"><span data-stu-id="ce362-173">To install roles and features on an offline VHD, you must add both the `-ComputerName` parameter and the `-VHD` parameter.</span></span> <span data-ttu-id="ce362-174">Параметр `-ComputerName` содержит имя сервера, на котором следует подключить виртуальный жесткий диск, а параметр `-VHD` — путь к VHD-файлу на указанном сервере.</span><span class="sxs-lookup"><span data-stu-id="ce362-174">The `-ComputerName` parameter contains the name of the server on which to mount the VHD, and the `-VHD` parameter contains the path to the VHD file on the specified server.</span></span>

   `Install-WindowsFeature -Name WindowsPowerShellWebAccess -VHD <path> -ComputerName <computer_name> -IncludeManagementTools -Restart`

1. <span data-ttu-id="ce362-175">Когда установка завершена, убедитесь, что Windows PowerShell Web Access установлен на целевых серверах, запустив командлет **Get-WindowsFeature** на целевом сервере в консоли Windows PowerShell, которая была открыта с повышенными правами пользователя.</span><span class="sxs-lookup"><span data-stu-id="ce362-175">When installation is complete, verify that Windows PowerShell Web Access was installed on destination servers by running the **Get-WindowsFeature** cmdlet on a destination server, in a Windows PowerShell console that has been opened with elevated user rights.</span></span> <span data-ttu-id="ce362-176">Можно также проверить установку Windows PowerShell Web Access в консоли диспетчера серверов, выбрав целевой сервер на странице **Все серверы**, а затем просмотрев плитку **Роли и компоненты** для выбранного сервера.</span><span class="sxs-lookup"><span data-stu-id="ce362-176">You can also verify that Windows PowerShell Web Access was installed in the Server Manager console, by selecting a destination server on the **All Servers** page, and then viewing the **Roles and Features** tile for the selected server.</span></span> <span data-ttu-id="ce362-177">Можно также просмотреть файл сведений для Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-177">You can also view the readme file for Windows PowerShell Web Access.</span></span>

1. <span data-ttu-id="ce362-178">После завершения установки Windows PowerShell Web Access выводится приглашение прочитать файл сведений, содержащий основные инструкции по установке шлюза.</span><span class="sxs-lookup"><span data-stu-id="ce362-178">After Windows PowerShell Web Access is installed, you are prompted to review the readme file, which contains basic, required setup instructions for the gateway.</span></span> <span data-ttu-id="ce362-179">Эти инструкции по установке приводятся также в следующем разделе [Настройка шлюза](#configure-the-gateway).</span><span class="sxs-lookup"><span data-stu-id="ce362-179">These setup instructions are also in the following section, [Configure the Gateway](#configure-the-gateway).</span></span> <span data-ttu-id="ce362-180">Путь к файлу сведений: **C:\\Windows\\Web\\PowerShellWebAccess\\wwwroot\\README.txt**.</span><span class="sxs-lookup"><span data-stu-id="ce362-180">The path to the readme file is **C:\\Windows\\Web\\PowerShellWebAccess\\wwwroot\\README.txt**.</span></span>

### <a name="configure-the-gateway"></a><span data-ttu-id="ce362-181">Настройка шлюза</span><span class="sxs-lookup"><span data-stu-id="ce362-181">Configure the Gateway</span></span>

<span data-ttu-id="ce362-182">Командлет **Install-PswaWebApplication** позволяет быстро выполнить настройку Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-182">The **Install-PswaWebApplication** cmdlet is a quick way to get Windows PowerShell Web Access configured.</span></span> <span data-ttu-id="ce362-183">Хотя можно добавить параметр `UseTestCertificate` в командлет `Install-PswaWebApplication`, чтобы установить самозаверяющий SSL-сертификат для целей тестирования, это небезопасно. Для безопасной производственной среды всегда используйте действительный SSL-сертификат, подписанный центром сертификации.</span><span class="sxs-lookup"><span data-stu-id="ce362-183">Although you can add the `UseTestCertificate` parameter to the `Install-PswaWebApplication` cmdlet to install a self-signed SSL certificate for test purposes, this is not secure; for a secure production environment, always use a valid SSL certificate that has been signed by a certification authority (CA).</span></span>
<span data-ttu-id="ce362-184">Администраторы могут заменить тестовый сертификат на подписанный сертификат по своему выбору с помощью консоли "Диспетчер служб IIS".</span><span class="sxs-lookup"><span data-stu-id="ce362-184">Administrators can replace the test certificate with a signed certificate of their choice by using the IIS Manager console.</span></span>

<span data-ttu-id="ce362-185">Вы можете выполнить настройку веб-приложения Windows PowerShell Web Access с помощью командлета `Install-PswaWebApplication` или процедуры настройки через пользовательский интерфейс диспетчера служб IIS.</span><span class="sxs-lookup"><span data-stu-id="ce362-185">You can complete Windows PowerShell Web Access web application configuration either by running the `Install-PswaWebApplication` cmdlet or by performing GUI-based configuration steps in IIS Manager.</span></span> <span data-ttu-id="ce362-186">По умолчанию командлет устанавливает веб-приложение **pswa** (и пул приложений для него, **pswa_pool**) в контейнер **Веб-сайт по умолчанию**, как показано в диспетчере служб IIS. Если требуется, вы можете изменить в командлете контейнер сайта по умолчанию для веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="ce362-186">By default, the cmdlet installs the web application, **pswa** (and an application pool for it, **pswa_pool**), in the **Default Web Site** container, as shown in IIS Manager; if desired, you can instruct the cmdlet to change the default site container of the web application.</span></span> <span data-ttu-id="ce362-187">Диспетчер служб IIS предлагает параметры настройки, доступные для веб-приложений, например, изменение номера порта или SSL-сертификата.</span><span class="sxs-lookup"><span data-stu-id="ce362-187">IIS Manager offers configuration options that are available for web applications, such as changing the port number or the Secure Sockets Layer (SSL) certificate.</span></span>

><span data-ttu-id="ce362-188">**![Примечание по безопасности](images/securitynote.jpeg) Security Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-188">**![Security Note](images/securitynote.jpeg) Security Note**</span></span>
> 
><span data-ttu-id="ce362-189">Мы настоятельно рекомендуем администраторам настраивать шлюз на использование действительного сертификата, подписанного центром сертификации.</span><span class="sxs-lookup"><span data-stu-id="ce362-189">We strongly recommend that administrators configure the gateway to use a valid certificate that has been signed by a CA.</span></span> 

#### <a name="to-configure-the-windows-powershell-web-access-gateway-with-a-test-certificate-by-using-install-pswawebapplication"></a><span data-ttu-id="ce362-190">Настройка шлюза Windows PowerShell Web Access с тестовым сертификатом с помощью Install-PswaWebApplication</span><span class="sxs-lookup"><span data-stu-id="ce362-190">To configure the Windows PowerShell Web Access gateway with a test certificate by using Install-PswaWebApplication</span></span>

1. <span data-ttu-id="ce362-191">Выполните одно из следующих действий, чтобы открыть сеанс Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ce362-191">Do one of the following to open a Windows PowerShell session.</span></span>

    - <span data-ttu-id="ce362-192">На рабочем столе Windows щелкните правой кнопкой мыши **Windows PowerShell** на панели задач.</span><span class="sxs-lookup"><span data-stu-id="ce362-192">On the Windows desktop, right-click **Windows PowerShell** on the taskbar.</span></span>

    - <span data-ttu-id="ce362-193">На **начальном** экране Windows щелкните **Windows PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="ce362-193">On the Windows **Start** screen, click **Windows PowerShell**.</span></span>

2.  <span data-ttu-id="ce362-194">Введите следующую команду и нажмите клавишу **ВВОД**.</span><span class="sxs-lookup"><span data-stu-id="ce362-194">Type the following, and then press **Enter**.</span></span>

    <span data-ttu-id="ce362-195">**Install-PswaWebApplication -UseTestCertificate**</span><span class="sxs-lookup"><span data-stu-id="ce362-195">**Install-PswaWebApplication -UseTestCertificate**</span></span>

  ><span data-ttu-id="ce362-196">**![Примечание по безопасности](images/securitynote.jpeg) Security Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-196">**![Security Note](images/securitynote.jpeg) Security Note**</span></span>
  >
  ><span data-ttu-id="ce362-197">Параметр `UseTestCertificate` следует использовать только в частной тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="ce362-197">The `UseTestCertificate` parameter should only be used in a private test environment.</span></span> <span data-ttu-id="ce362-198">Для безопасной производственной среды мы рекомендуем использовать действительный сертификат, подписанный центром сертификации.</span><span class="sxs-lookup"><span data-stu-id="ce362-198">For a secure production environment, we recommend using a valid certificate that has been signed by a CA.</span></span>

<span data-ttu-id="ce362-199">При выполнении командлета веб-приложение Windows PowerShell Web Access устанавливается в контейнер IIS "Веб-сайт по умолчанию".</span><span class="sxs-lookup"><span data-stu-id="ce362-199">Running the cmdlet installs the Windows PowerShell Web Access web application within the IIS Default Web Site container.</span></span> <span data-ttu-id="ce362-200">Этот командлет создает инфраструктуру, необходимую для выполнения Windows PowerShell Web Access на веб-сайте по умолчанию, `https://<server_name>/pswa`.</span><span class="sxs-lookup"><span data-stu-id="ce362-200">The cmdlet creates the infrastructure required to run Windows PowerShell Web Access on the default website, `https://<server_name>/pswa`.</span></span> <span data-ttu-id="ce362-201">Чтобы установить веб-приложение на другой веб-сайт, введите имя веб-сайта, добавив параметр `WebSiteName`.</span><span class="sxs-lookup"><span data-stu-id="ce362-201">To install the web application in a different website, provide the website name by adding the `WebSiteName` parameter.</span></span> <span data-ttu-id="ce362-202">Чтобы изменить имя веб-приложения (по умолчанию `pswa`), добавьте параметр `WebApplicationName` .</span><span class="sxs-lookup"><span data-stu-id="ce362-202">To change the name of the web application (the default is `pswa`), add the `WebApplicationName` parameter.</span></span>

<span data-ttu-id="ce362-203">Следующие параметры настраиваются при выполнении командлета.</span><span class="sxs-lookup"><span data-stu-id="ce362-203">The following settings are configured by running the cmdlet.</span></span> <span data-ttu-id="ce362-204">Если требуется, вы можете изменить их вручную в консоли "Диспетчер служб IIS".</span><span class="sxs-lookup"><span data-stu-id="ce362-204">You can change these manually in the IIS Manager console, if desired.</span></span>

- <span data-ttu-id="ce362-205">Path: /pswa</span><span class="sxs-lookup"><span data-stu-id="ce362-205">Path: /pswa</span></span>
- <span data-ttu-id="ce362-206">ApplicationPool: pswa_pool</span><span class="sxs-lookup"><span data-stu-id="ce362-206">ApplicationPool: pswa_pool</span></span>
- <span data-ttu-id="ce362-207">EnabledProtocols: http</span><span class="sxs-lookup"><span data-stu-id="ce362-207">EnabledProtocols: http</span></span>
- <span data-ttu-id="ce362-208">PhysicalPath: %*windir*%/Web/PowerShellWebAccess/wwwroot</span><span class="sxs-lookup"><span data-stu-id="ce362-208">PhysicalPath: %*windir*%/Web/PowerShellWebAccess/wwwroot</span></span>

<span data-ttu-id="ce362-209">**Пример**: `Install-PswaWebApplication -webApplicationName myWebApp -useTestCertificate`</span><span class="sxs-lookup"><span data-stu-id="ce362-209">**Example**: `Install-PswaWebApplication -webApplicationName myWebApp -useTestCertificate`</span></span>

<span data-ttu-id="ce362-210">В этом примере адрес получившегося сайта для Windows PowerShell Web Access таков: https://\<*имя_сервера*\>/myWebApp.</span><span class="sxs-lookup"><span data-stu-id="ce362-210">In this example, the resulting website for Windows PowerShell Web Access is https://\<*server_name*\>/myWebApp.</span></span>

><span data-ttu-id="ce362-211">**![Примечание](images/note.jpeg) Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-211">**![Note](images/note.jpeg) Note**</span></span> 
> 
><span data-ttu-id="ce362-212">Вы не можете выполнить вход до предоставления пользователям доступа к веб-сайту с помощью добавления прав авторизации.</span><span class="sxs-lookup"><span data-stu-id="ce362-212">You cannot sign in until users have been granted access to the website by adding authorization rules.</span></span> <span data-ttu-id="ce362-213">Дополнительные сведения см. в разделе [Настройка ограничивающего правила авторизации](#configure-a-restrictive-authorization-rule) и [Правила авторизации и средства безопасности Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-213">For more information, see [configure a restrictive authorization rule](#configure-a-restrictive-authorization-rule) and [Authorization Rules and Security Features of Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span></span>

#### <a name="to-configure-the-windows-powershell-web-access-gateway-with-a-genuine-certificate-by-using-install-pswawebapplication-and-iis-manager"></a><span data-ttu-id="ce362-214">Настройка шлюза Windows PowerShell Web Access с подлинным сертификатом с использованием командлета Install-PswaWebApplication и диспетчера IIS</span><span class="sxs-lookup"><span data-stu-id="ce362-214">To configure the Windows PowerShell Web Access gateway with a genuine certificate by using Install-PswaWebApplication and IIS Manager</span></span>

1. <span data-ttu-id="ce362-215">Выполните одно из следующих действий, чтобы открыть сеанс Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ce362-215">Do one of the following to open a Windows PowerShell session.</span></span>

    - <span data-ttu-id="ce362-216">На рабочем столе Windows щелкните правой кнопкой мыши **Windows PowerShell** на панели задач.</span><span class="sxs-lookup"><span data-stu-id="ce362-216">On the Windows desktop, right-click **Windows PowerShell** on the taskbar.</span></span>

    - <span data-ttu-id="ce362-217">На **начальном** экране Windows щелкните **Windows PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="ce362-217">On the Windows **Start** screen, click **Windows PowerShell**.</span></span>

2. <span data-ttu-id="ce362-218">Введите следующую команду и нажмите клавишу **ВВОД**.</span><span class="sxs-lookup"><span data-stu-id="ce362-218">Type the following, and then press **Enter**.</span></span>

    <span data-ttu-id="ce362-219">**Install-PswaWebApplication**</span><span class="sxs-lookup"><span data-stu-id="ce362-219">**Install-PswaWebApplication**</span></span>

    <span data-ttu-id="ce362-220">Следующие параметры шлюза настраиваются при выполнении командлета.</span><span class="sxs-lookup"><span data-stu-id="ce362-220">The following gateway settings are configured by running the cmdlet.</span></span>
    <span data-ttu-id="ce362-221">Если требуется, вы можете изменить их вручную в консоли "Диспетчер служб IIS".</span><span class="sxs-lookup"><span data-stu-id="ce362-221">You can change these manually in the IIS Manager console, if desired.</span></span>
    <span data-ttu-id="ce362-222">Можно также указать значения параметров `WebsiteName` и `WebApplicationName` в командлете `Install-PswaWebApplication`.</span><span class="sxs-lookup"><span data-stu-id="ce362-222">You can also specify values for the `WebsiteName` and `WebApplicationName` parameters of the `Install-PswaWebApplication` cmdlet.</span></span>

    - <span data-ttu-id="ce362-223">Path: /pswa</span><span class="sxs-lookup"><span data-stu-id="ce362-223">Path: /pswa</span></span>

    - <span data-ttu-id="ce362-224">ApplicationPool: pswa_pool</span><span class="sxs-lookup"><span data-stu-id="ce362-224">ApplicationPool: pswa_pool</span></span>

    - <span data-ttu-id="ce362-225">EnabledProtocols: http</span><span class="sxs-lookup"><span data-stu-id="ce362-225">EnabledProtocols: http</span></span>

    - <span data-ttu-id="ce362-226">PhysicalPath: %*windir*%/Web/PowerShellWebAccess/wwwroot</span><span class="sxs-lookup"><span data-stu-id="ce362-226">PhysicalPath: %*windir*%/Web/PowerShellWebAccess/wwwroot</span></span>

3. <span data-ttu-id="ce362-227">Откройте консоль "Диспетчер служб IIS", выполнив одно из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="ce362-227">Open the IIS Manager console by doing one of the following.</span></span>

    - <span data-ttu-id="ce362-228">На рабочем столе Windows запустите диспетчер серверов, щелкнув **Диспетчер серверов** на панели задач Windows.</span><span class="sxs-lookup"><span data-stu-id="ce362-228">On the Windows desktop, start Server Manager by clicking **Server Manager** in the Windows taskbar.</span></span> <span data-ttu-id="ce362-229">В диспетчере серверов откройте меню **Сервис** и выберите пункт **Диспетчер служб IIS**.</span><span class="sxs-lookup"><span data-stu-id="ce362-229">On the **Tools** menu in Server Manager, click **Internet Information Services (IIS) Manager**.</span></span>

    - <span data-ttu-id="ce362-230">На **начальном** экране в Windows выберите **Диспетчер серверов**.</span><span class="sxs-lookup"><span data-stu-id="ce362-230">On the Windows **Start** screen, click **Server Manager**.</span></span>

4. <span data-ttu-id="ce362-231">В области дерева диспетчера служб IIS разверните узел для сервера, на котором установлен компонент Windows PowerShell Web Access, и перейдите к папке **Сайты**.</span><span class="sxs-lookup"><span data-stu-id="ce362-231">In the IIS Manager tree pane, expand the node for the server on which Windows PowerShell Web Access is installed until the **Sites** folder is visible.</span></span> <span data-ttu-id="ce362-232">Разверните папку **Сайты**.</span><span class="sxs-lookup"><span data-stu-id="ce362-232">Expand the **Sites** folder.</span></span>

5. <span data-ttu-id="ce362-233">Выберите веб-сайт, на котором было установлено веб-приложение Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-233">Select the website in which you have installed the Windows PowerShell Web Access web application.</span></span> <span data-ttu-id="ce362-234">В области **Действия** щелкните элемент **Привязки**.</span><span class="sxs-lookup"><span data-stu-id="ce362-234">In the **Actions** pane, click **Bindings**.</span></span>

6.  <span data-ttu-id="ce362-235">В диалоговом окне **Привязки сайта** нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="ce362-235">In the **Site Binding** dialog box, click **Add**.</span></span>

7.  <span data-ttu-id="ce362-236">В диалоговом окне **Добавление привязки сайта** выберите в поле **Тип** значение **https**.</span><span class="sxs-lookup"><span data-stu-id="ce362-236">In the **Add Site Binding** dialog box, in the **Type** field, select **https**.</span></span>

8. <span data-ttu-id="ce362-237">В поле **Сертификат SSL** выберите ваш подписанный сертификат в раскрывающемся меню.</span><span class="sxs-lookup"><span data-stu-id="ce362-237">In the **SSL certificate** field, select your signed certificate from the drop-down menu.</span></span> <span data-ttu-id="ce362-238">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce362-238">Click **OK**.</span></span> <span data-ttu-id="ce362-239">Дополнительные сведения о получении сертификата см. в разделе [Настройка SSL-сертификата в диспетчере служб IIS](#to-configure-an-ssl-certificate-in-iis-Manager) в данной статье.</span><span class="sxs-lookup"><span data-stu-id="ce362-239">See [To configure an SSL certificate in IIS Manager](#to-configure-an-ssl-certificate-in-iis-Manager) in this topic for more information about how to obtain a certificate.</span></span>

    <span data-ttu-id="ce362-240">Теперь веб-приложение Windows PowerShell Web Access настроено для использования вашего подписанного SSL-сертификата.</span><span class="sxs-lookup"><span data-stu-id="ce362-240">The Windows PowerShell Web Access web application is now configured to  use your signed SSL certificate.</span></span>

    <span data-ttu-id="ce362-241">Чтобы получить доступ к Windows PowerShell Web Access, откройте адрес **https://\<имя_сервера\>/pswa** в окне браузера.</span><span class="sxs-lookup"><span data-stu-id="ce362-241">You can access Windows PowerShell Web Access by opening  **https://\<server_name\>/pswa** in a browser window.</span></span>

><span data-ttu-id="ce362-242">**![Примечание](images/note.jpeg) Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-242">**![Note](images/note.jpeg) Note**</span></span> 
> 
><span data-ttu-id="ce362-243">Вы не можете выполнить вход до предоставления пользователям доступа к веб-сайту с помощью добавления прав авторизации.</span><span class="sxs-lookup"><span data-stu-id="ce362-243">You cannot sign in until users have been granted access to the website by adding authorization rules.</span></span> 
><span data-ttu-id="ce362-244">Дополнительные сведения см. в разделе [Настройка ограничивающего правила авторизации](#configure-a-restrictive-authorization-rule) в этой статье и [Правила авторизации и средства безопасности Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-244">For more information, see [Configure a restrictive authorization rule](#configure-a-restrictive-authorization-rule), in this topic, and [Authorization Rules and Security Features of Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span></span>

### <a name="configure-a-restrictive-authorization-rule"></a><span data-ttu-id="ce362-245">Настройка ограничивающего правила авторизации</span><span class="sxs-lookup"><span data-stu-id="ce362-245">Configure a restrictive authorization rule</span></span>

<span data-ttu-id="ce362-246">После установки Windows PowerShell Web Access и настройки шлюза пользователи могут открывать страницу входа в браузере, но они не могут выполнить вход, пока администратор Windows PowerShell Web Access не предоставит им доступ в явном виде.</span><span class="sxs-lookup"><span data-stu-id="ce362-246">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span> <span data-ttu-id="ce362-247">Управление доступом в Windows PowerShell Web Access осуществляется с помощью набора командлетов Windows PowerShell, описанных в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="ce362-247">Windows PowerShell Web Access access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span> <span data-ttu-id="ce362-248">Нет соответствующего графического пользовательского интерфейса для добавления правил авторизации или управления ими.</span><span class="sxs-lookup"><span data-stu-id="ce362-248">There is no comparable GUI for adding or managing authorization rules.</span></span> <span data-ttu-id="ce362-249">Подробные сведения о командлетах Windows PowerShell Web Access см. в справочных разделах по командлетам в статье [Командлеты Windows PowerShell Web Access](cmdlets/web-access-cmdlets.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-249">For more detailed information about Windows PowerShell Web Access cmdlets, see the cmdlet reference topics, [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md).</span></span>

<span data-ttu-id="ce362-250">Дополнительные сведения о безопасности и правилах авторизации Windows PowerShell Web Access см. в разделе [Правила авторизации и средства безопасности Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-250">For more detail about Windows PowerShell Web Access authorization rules and security, see [Authorization Rules and Security Features of Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="ce362-251">Добавление ограничивающего правила авторизации</span><span class="sxs-lookup"><span data-stu-id="ce362-251">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="ce362-252">Выполните одно из следующих действий, чтобы открыть сеанс Windows PowerShell с повышенными правами.</span><span class="sxs-lookup"><span data-stu-id="ce362-252">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

    - <span data-ttu-id="ce362-253">На рабочем столе Windows щелкните правой кнопкой мыши **Windows PowerShell** на панели задач и выберите команду **Запустить от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="ce362-253">On the Windows desktop, right-click **Windows PowerShell** on the taskbar, and then click **Run as Administrator**.</span></span>

    - <span data-ttu-id="ce362-254">На **начальном экране** Windows щелкните правой кнопкой мыши **Windows PowerShell**, а затем выберите команду **Запустить от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="ce362-254">On the Windows **Start** screen, right-click **Windows PowerShell**, and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="ce362-255">Необязательный шаг для ограничения доступа пользователей с помощью конфигураций сеансов: убедитесь, что конфигурации сеансов, которые вы хотите использовать в своих правилах, уже существуют.</span><span class="sxs-lookup"><span data-stu-id="ce362-255">Optional step for restricting user access by using session configurations: Verify that session configurations that you want to use in your rules already exist.</span></span> <span data-ttu-id="ce362-256">В противном случае выполните инструкции по созданию конфигураций сеансов, приведенные в статье [about_Session_Configuration_Files](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_session_configurations).</span><span class="sxs-lookup"><span data-stu-id="ce362-256">If they have not yet been created, use instructions for creating session configurations in [about_Session_Configuration_Files](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_session_configurations).</span></span>

3. <span data-ttu-id="ce362-257">Введите следующую команду и нажмите клавишу **ВВОД**.</span><span class="sxs-lookup"><span data-stu-id="ce362-257">Type the following, and then press **Enter**.</span></span>

   `Add-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName <computer_name> -ConfigurationName <session_configuration_name>`

   <span data-ttu-id="ce362-258">Это правило авторизации разрешает конкретному пользователю доступ к одному сетевому компьютеру, к которому обычно требуется доступ, с доступом к конкретной конфигурации сеанса, область которого соответствует потребностям пользовательских сценариев и командлетов.</span><span class="sxs-lookup"><span data-stu-id="ce362-258">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user's typical scripting and cmdlet needs.</span></span>
   
   <span data-ttu-id="ce362-259">В следующем примере пользователю с именем `JSmith` в домене `Contoso` предоставляется доступ для управления компьютером `Contoso_214` и использования конфигурации сеанса с именем `NewAdminsOnly`.</span><span class="sxs-lookup"><span data-stu-id="ce362-259">In the following example, a user named `JSmith` in the `Contoso` domain is granted access to manage the computer `Contoso_214`, and use a session configuration named `NewAdminsOnly`.</span></span>

   `Add-PswaAuthorizationRule -UserName Contoso\JSmith -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly`

4. <span data-ttu-id="ce362-260">Убедитесь, что правило было создано, выполнив командлет `Get-PswaAuthorizationRule` или `Test-PswaAuthorizationRule -UserName <domain\user> -ComputerName <computer-name>`.</span><span class="sxs-lookup"><span data-stu-id="ce362-260">Verify that the rule has been created by running either the `Get-PswaAuthorizationRule` cmdlet, or `Test-PswaAuthorizationRule -UserName <domain\user> -ComputerName <computer-name>`</span></span>

5. <span data-ttu-id="ce362-261">Например, `Test-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214`.</span><span class="sxs-lookup"><span data-stu-id="ce362-261">For example, `Test-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214`.</span></span>

<span data-ttu-id="ce362-262">После настройки правила авторизации авторизованные пользователи могут выполнить вход в веб-консоль и приступить к использованию Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-262">After you have configured an authorization rule, you are ready for authorized users to sign in to the web-based console and begin using Windows PowerShell Web Access.</span></span>

## <a name="custom-deployment"></a><span data-ttu-id="ce362-263">Пользовательское развертывание</span><span class="sxs-lookup"><span data-stu-id="ce362-263">Custom deployment</span></span>

<span data-ttu-id="ce362-264">Шлюз Windows PowerShell Web Access можно установить на сервер под управлением Windows Server 2012 R2 или Windows Server 2012 с помощью мастера добавления ролей и компонентов в диспетчере серверов.</span><span class="sxs-lookup"><span data-stu-id="ce362-264">You can install the Windows PowerShell Web Access gateway on a server that is running Windows Server 2012 R2 or Windows Server 2012 by using the Add Roles and Features Wizard in Server Manager.</span></span> <span data-ttu-id="ce362-265">После установки Windows PowerShell Web Access можно настроить конфигурацию шлюза в диспетчере IIS.</span><span class="sxs-lookup"><span data-stu-id="ce362-265">After Windows PowerShell Web Access is installed, you can customize the configuration of the gateway in IIS Manager.</span></span>

### <a name="install-windows-powershell-web-access"></a><span data-ttu-id="ce362-266">Установка Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="ce362-266">Install Windows PowerShell Web Access</span></span>

#### <a name="to-install-windows-powershell-web-access-by-using-the-add-roles-and-features-wizard"></a><span data-ttu-id="ce362-267">Установка Windows PowerShell Web Access с помощью мастера добавления ролей и компонентов</span><span class="sxs-lookup"><span data-stu-id="ce362-267">To install Windows PowerShell Web Access by using the Add Roles and Features Wizard</span></span>

1.  <span data-ttu-id="ce362-268">Если диспетчер серверов уже открыт, переходите к следующему шагу.</span><span class="sxs-lookup"><span data-stu-id="ce362-268">If Server Manager is already open, go on to the next step.</span></span> <span data-ttu-id="ce362-269">Если диспетчер серверов еще не открыт, откройте его одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="ce362-269">If Server Manager is not already open, open it by doing one of the following.</span></span>

    - <span data-ttu-id="ce362-270">На рабочем столе Windows запустите диспетчер серверов, щелкнув **Диспетчер серверов** на панели задач Windows.</span><span class="sxs-lookup"><span data-stu-id="ce362-270">On the Windows desktop, start Server Manager by clicking **Server Manager** in the Windows taskbar.</span></span>

    - <span data-ttu-id="ce362-271">На **начальном** экране в Windows выберите **Диспетчер серверов**.</span><span class="sxs-lookup"><span data-stu-id="ce362-271">On the Windows **Start** screen, click **Server Manager**.</span></span>

2.  <span data-ttu-id="ce362-272">В меню **Управление** выберите команду **Добавить роли и компоненты**.</span><span class="sxs-lookup"><span data-stu-id="ce362-272">On the **Manage** menu, click **Add Roles and Features**.</span></span>

3.  <span data-ttu-id="ce362-273">На странице **Выбор типа установки** выберите **Установка ролей или компонентов**.</span><span class="sxs-lookup"><span data-stu-id="ce362-273">On the **Select installation type** page, select **Role-based or feature-based installation**.</span></span> <span data-ttu-id="ce362-274">Нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="ce362-274">Click **Next**.</span></span>

4.  <span data-ttu-id="ce362-275">На странице **Выбор целевого сервера** выберите сервер из пула серверов или автономный виртуальный жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="ce362-275">On the **Select destination server** page, select a server from the server pool, or select an offline VHD.</span></span> <span data-ttu-id="ce362-276">Чтобы выбрать автономный виртуальный жесткий диск в качестве конечного сервера, сначала выберите сервер, на котором будет подключен виртуальный жесткий диск, а затем выберите VHD-файл.</span><span class="sxs-lookup"><span data-stu-id="ce362-276">To select an offline VHD as your destination server, first select the server on which to mount the VHD, and then select the VHD file.</span></span> <span data-ttu-id="ce362-277">Сведения о добавлении серверов в пул серверов см. в справке диспетчера серверов.</span><span class="sxs-lookup"><span data-stu-id="ce362-277">For information about how to add servers to your server pool, see the Server Manager Help.</span></span> <span data-ttu-id="ce362-278">Выбрав конечный сервер, нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="ce362-278">After you have selected the destination server, click **Next**.</span></span>

5.  <span data-ttu-id="ce362-279">На странице **Выбор компонентов** мастера разверните узел **Windows PowerShell** и выберите **Windows PowerShell Web Access**.</span><span class="sxs-lookup"><span data-stu-id="ce362-279">On the **Select features** page of the wizard, expand **Windows PowerShell**, and then select **Windows PowerShell Web Access**.</span></span>

6.  <span data-ttu-id="ce362-280">Отметим, что выводится приглашение добавить необходимые компоненты, такие как .NET Framework 4.5 и службы ролей веб-сервера (IIS).</span><span class="sxs-lookup"><span data-stu-id="ce362-280">Note that you are prompted to add required features, such as .NET Framework 4.5, and role services of Web Server (IIS).</span></span> <span data-ttu-id="ce362-281">Добавьте необходимые компоненты и продолжайте работу.</span><span class="sxs-lookup"><span data-stu-id="ce362-281">Add required features and continue.</span></span>

    ><span data-ttu-id="ce362-282">**![Примечание](images/note.jpeg) Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-282">**![Note](images/note.jpeg) Note**</span></span> 
    >
    ><span data-ttu-id="ce362-283">При установке Windows PowerShell Web Access с помощью мастера добавления ролей и компонентов также устанавливается веб-сервер (IIS), включая оснастку диспетчера служб IIS.</span><span class="sxs-lookup"><span data-stu-id="ce362-283">Installing Windows PowerShell Web Access by using the Add Roles and Features Wizard also installs Web Server (IIS), including the IIS Manager snap-in.</span></span> <span data-ttu-id="ce362-284">Если используется мастер добавления ролей и компонентов, оснастка и другие средства управления IIS устанавливаются по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ce362-284">The snap-in and other IIS management tools are installed by default if you use Add Roles and Features Wizard.</span></span> <span data-ttu-id="ce362-285">При установке Windows PowerShell Web Access с помощью командлетов Windows PowerShell, как описано в следующей процедуре, средства управления не устанавливаются по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ce362-285">If you install Windows PowerShell Web Access by using Windows PowerShell cmdlets as described in the following procedure, management tools are not added by default.</span></span>

7. <span data-ttu-id="ce362-286">На странице **Подтверждение выбранных элементов для установки**, если файлы компонентов для Windows PowerShell Web Access не сохраняются на целевом сервере, выбранном на шаге 4, щелкните **Указать альтернативный исходный путь** и укажите путь к файлам компонентов.</span><span class="sxs-lookup"><span data-stu-id="ce362-286">On the **Confirm installation selections** page, if the feature files for Windows PowerShell Web Access are not stored on the destination server that you selected in step 4, click **Specify an alternate source path**, and provide the path to the feature files.</span></span> <span data-ttu-id="ce362-287">В противном случае нажмите кнопку **Установить**.</span><span class="sxs-lookup"><span data-stu-id="ce362-287">Otherwise, click **Install**.</span></span>

8. <span data-ttu-id="ce362-288">После щелчка **Установить** на странице **Ход установки** отображаются ход выполнения установки, результаты и сообщения, такие как предупреждения, сообщения об ошибках и шаги по настройке после установки, необходимые для Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-288">After you click **Install**, the **Installation progress** page displays installation progress, results, and messages such as warnings, failures, or post-installation configuration steps that are required for Windows PowerShell Web Access.</span></span> <span data-ttu-id="ce362-289">После завершения установки Windows PowerShell Web Access выводится приглашение прочитать файл сведений, содержащий основные инструкции по установке шлюза.</span><span class="sxs-lookup"><span data-stu-id="ce362-289">After Windows PowerShell Web Access is installed, you are prompted to review the readme file, which contains basic, required setup instructions for the gateway.</span></span> <span data-ttu-id="ce362-290">Эти инструкции также являются частью этого раздела.</span><span class="sxs-lookup"><span data-stu-id="ce362-290">These instructions are also included in this topic.</span></span> <span data-ttu-id="ce362-291">Путь к файлу сведений: `C:\Windows\Web\PowerShellWebAccess\wwwroot\README.txt`.</span><span class="sxs-lookup"><span data-stu-id="ce362-291">The path to the readme file is `C:\Windows\Web\PowerShellWebAccess\wwwroot\README.txt`.</span></span>

### <a name="configure-the-gateway"></a><span data-ttu-id="ce362-292">Настройка шлюза</span><span class="sxs-lookup"><span data-stu-id="ce362-292">Configure the gateway</span></span>

<span data-ttu-id="ce362-293">Этот раздел содержит инструкции по установке веб-приложения Windows PowerShell Web Access в подкаталог, а не в корневой каталог веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="ce362-293">Instructions in this section are for installing the Windows PowerShell Web Access web application in a subdirectory and not in the root directory of your website.</span></span> <span data-ttu-id="ce362-294">Данная процедура, выполняемая через пользовательский интерфейс, эквивалентна действиям, выполняемым с помощью командлета `Install-PswaWebApplication`.</span><span class="sxs-lookup"><span data-stu-id="ce362-294">This procedure is the GUI-based equivalent of the actions performed by the `Install-PswaWebApplication` cmdlet.</span></span> <span data-ttu-id="ce362-295">В раздел также включены инструкции по использованию диспетчера служб IIS для настройки шлюза Windows PowerShell Web Access в качестве корневого веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="ce362-295">This section also includes instructions for how to use IIS Manager to configure the Windows PowerShell Web Access gateway as a root website.</span></span>

#### <a name="to-use-iis-manager-to-configure-the-gateway-in-an-existing-website"></a><span data-ttu-id="ce362-296">Использование диспетчера служб IIS для настройки шлюза в существующем веб-сайте</span><span class="sxs-lookup"><span data-stu-id="ce362-296">To use IIS Manager to configure the gateway in an existing website</span></span>

1.  <span data-ttu-id="ce362-297">Откройте консоль "Диспетчер служб IIS", выполнив одно из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="ce362-297">Open the IIS Manager console by doing one of the following.</span></span>

    - <span data-ttu-id="ce362-298">На рабочем столе Windows запустите диспетчер серверов, щелкнув **Диспетчер серверов** на панели задач Windows.</span><span class="sxs-lookup"><span data-stu-id="ce362-298">On the Windows desktop, start Server Manager by clicking **Server Manager** in the Windows taskbar.</span></span> <span data-ttu-id="ce362-299">В диспетчере серверов откройте меню **Сервис** и выберите пункт **Диспетчер служб IIS**.</span><span class="sxs-lookup"><span data-stu-id="ce362-299">On the **Tools** menu in Server Manager, click **Internet Information Services (IIS) Manager**.</span></span>

    - <span data-ttu-id="ce362-300">На **начальном** экране Windows введите любую часть имени **Диспетчер служб IIS**.</span><span class="sxs-lookup"><span data-stu-id="ce362-300">On the Windows **Start** screen, type any part of the name **Internet Information Services (IIS) Manager**.</span></span> <span data-ttu-id="ce362-301">Щелкните ярлык, когда он появится в списке результатов **Приложения**.</span><span class="sxs-lookup"><span data-stu-id="ce362-301">Click the shortcut when it is displayed in the **Apps** results.</span></span>

2.  <span data-ttu-id="ce362-302">Создайте новый пул приложений для Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-302">Create a new application pool for Windows PowerShell Web Access.</span></span> <span data-ttu-id="ce362-303">Разверните узел сервера шлюза в области дерева диспетчера служб IIS, выберите **Пулы приложений** и щелкните **Добавить пул приложений** в области **Действия**.</span><span class="sxs-lookup"><span data-stu-id="ce362-303">Expand the node of the gateway server in the IIS Manager tree pane, select **Application Pools**, and click **Add Application Pool** in the **Actions** pane.</span></span>

3.  <span data-ttu-id="ce362-304">Добавьте новый пул приложений с именем **pswa_pool** или укажите другое имя.</span><span class="sxs-lookup"><span data-stu-id="ce362-304">Add a new application pool with the name **pswa_pool**, or provide another name.</span></span> <span data-ttu-id="ce362-305">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce362-305">Click **OK**.</span></span>

4.  <span data-ttu-id="ce362-306">В области дерева диспетчера служб IIS разверните узел для сервера, на котором установлен компонент Windows PowerShell Web Access, и перейдите к папке **Сайты**.</span><span class="sxs-lookup"><span data-stu-id="ce362-306">In the IIS Manager tree pane, expand the node for the server on which Windows PowerShell Web Access is installed until the **Sites** folder is visible.</span></span> <span data-ttu-id="ce362-307">Выберите папку **Сайты**.</span><span class="sxs-lookup"><span data-stu-id="ce362-307">Select the **Sites** folder.</span></span>

5.  <span data-ttu-id="ce362-308">Щелкните правой кнопкой мыши веб-сайт (например, **Веб-сайт по умолчанию**), в который следует добавить веб-сайт Windows PowerShell Web Access, а затем выберите команду **Добавить приложение**.</span><span class="sxs-lookup"><span data-stu-id="ce362-308">Right-click the website (for example, **Default Web Site**) to which you would like to add the Windows PowerShell Web Access website, and then click **Add Application**.</span></span>

6.  <span data-ttu-id="ce362-309">В поле **Псевдоним** введите pswa или укажите другой псевдоним.</span><span class="sxs-lookup"><span data-stu-id="ce362-309">In the **Alias** field, type pswa, or provide another alias.</span></span> <span data-ttu-id="ce362-310">Псевдоним становится именем виртуального каталога.</span><span class="sxs-lookup"><span data-stu-id="ce362-310">The alias becomes the virtual directory name.</span></span> <span data-ttu-id="ce362-311">Так **pswa** в следующем URL-адресе представляет псевдоним, заданный на этом шаге: **https://\<имя_сервера\>/pswa**.</span><span class="sxs-lookup"><span data-stu-id="ce362-311">For example, **pswa** in the following URL represents the alias specified in this step: **https://\<server-name\>/pswa**.</span></span>

7.  <span data-ttu-id="ce362-312">В поле **Пул приложений** выберите пул приложений, созданный на шаге 3.</span><span class="sxs-lookup"><span data-stu-id="ce362-312">In the **Application pool** field, select the application pool that you created in step 3.</span></span>

8.  <span data-ttu-id="ce362-313">В поле **Физический путь** найдите расположение приложения.</span><span class="sxs-lookup"><span data-stu-id="ce362-313">In the **Physical path** field, browse for the location of the application.</span></span> <span data-ttu-id="ce362-314">Можно использовать расположение по умолчанию %windir%/Web/PowerShellWebAccess/wwwroot.</span><span class="sxs-lookup"><span data-stu-id="ce362-314">You can use the default location, %windir%/Web/PowerShellWebAccess/wwwroot.</span></span> <span data-ttu-id="ce362-315">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce362-315">Click **OK**.</span></span>

9.  <span data-ttu-id="ce362-316">Следуйте инструкциям в процедуре "Настройка SSL-сертификата в диспетчере служб IIS"(#to-configure-an-ssl-certificate-in-iis-Manager) этого раздела.</span><span class="sxs-lookup"><span data-stu-id="ce362-316">Follow the steps in the procedure To configure an SSL certificate in IIS manager](#to-configure-an-ssl-certificate-in-iis-Manager) in this topic.</span></span>

10. <span data-ttu-id="ce362-317">![](images/SecurityNote.jpeg) Необязательный шаг для обеспечения безопасности:</span><span class="sxs-lookup"><span data-stu-id="ce362-317">![](images/SecurityNote.jpeg) Optional security step:</span></span>

    <span data-ttu-id="ce362-318">если веб-сайт выбран в панели дерева, дважды щелкните **Параметры SSL** в панели содержимого.</span><span class="sxs-lookup"><span data-stu-id="ce362-318">With the website selected in the tree pane, double-click **SSL Settings** in the content pane.</span></span> <span data-ttu-id="ce362-319">Выберите **Требовать SSL**, а затем в области **Действия** щелкните **Применить**.</span><span class="sxs-lookup"><span data-stu-id="ce362-319">Select **Require SSL**, and then in the **Actions** pane, click **Apply**.</span></span> <span data-ttu-id="ce362-320">Дополнительно в области **Параметры SSL** можно потребовать, чтобы пользователи, подключающиеся к веб-сайту Windows PowerShell Web Access, имели клиентские сертификаты.</span><span class="sxs-lookup"><span data-stu-id="ce362-320">Optionally, in the **SSL Settings** pane, you can require that users connecting to the Windows PowerShell Web Access website have client certificates.</span></span> <span data-ttu-id="ce362-321">Клиентские сертификаты помогают проверить идентификацию пользователя клиентского устройства.</span><span class="sxs-lookup"><span data-stu-id="ce362-321">Client certificates help to verify the identity of a client device user.</span></span> <span data-ttu-id="ce362-322">Дополнительные сведения о том, как требование клиентских сертификатов может повысить безопасность Windows PowerShell Web Access, см. в разделе [Правила авторизации и средства безопасности Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md) в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="ce362-322">For more information about how requiring client certificates can increase the security of Windows PowerShell Web Access, see [Authorization Rules and Security Features of Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md) in this guide.</span></span>

11. <span data-ttu-id="ce362-323">Откройте сеанс браузера на клиентском устройстве.</span><span class="sxs-lookup"><span data-stu-id="ce362-323">Open a browser session on a client device.</span></span> <span data-ttu-id="ce362-324">Дополнительные сведения о поддерживаемых браузерах и устройствах см. в разделе [Поддержка браузеров и клиентских устройств](#browser-and-client-device-support) в этой статье.</span><span class="sxs-lookup"><span data-stu-id="ce362-324">For more information about supported browsers and devices, see [Browser and client device support](#browser-and-client-device-support) in this topic.</span></span>

12. <span data-ttu-id="ce362-325">Откройте новый веб-сайт Windows PowerShell Web Access — **https://\<*имя_сервера_шлюза*\>/pswa**.</span><span class="sxs-lookup"><span data-stu-id="ce362-325">Open the new Windows PowerShell Web Access website, **https://\<*gateway-server-name*\>/pswa**.</span></span>

    <span data-ttu-id="ce362-326">В браузере должна появиться страница входа в консоль Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-326">The browser should display the Windows PowerShell Web Access console sign-in page.</span></span>

    ><span data-ttu-id="ce362-327">**![Примечание](images/note.jpeg) Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-327">**![Note](images/note.jpeg) Note**</span></span> 
    > 
    ><span data-ttu-id="ce362-328">Вы не можете выполнить вход до предоставления пользователям доступа к веб-сайту с помощью добавления прав авторизации.</span><span class="sxs-lookup"><span data-stu-id="ce362-328">You cannot sign in until users have been granted access to the website by adding authorization rules.</span></span> 
    ><span data-ttu-id="ce362-329">Дополнительные сведения см. в разделе [Настройка ограничивающего правила авторизации](#configure-a-restrictive-authorization-rule) в этой статье и [Правила авторизации и средства безопасности Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-329">For more information, see [Configure a restrictive authorization rule](#configure-a-restrictive-authorization-rule), in this topic, and [Authorization Rules and Security Features of Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span></span>

13. <span data-ttu-id="ce362-330">В сеансе Windows PowerShell, который был открыт с повышенными правами (запуск от имени администратора), выполните следующий сценарий, в котором *application_pool_name* представляет имя пула приложений, созданного на шаге 3, чтобы предоставить пулу приложений права доступа к файлу авторизации.</span><span class="sxs-lookup"><span data-stu-id="ce362-330">In a Windows PowerShell session that has been opened with elevated user rights (Run as Administrator), run the following script, in which *application_pool_name* represents the name of the application pool that you created in step 3, to give the application pool access rights to the authorization file.</span></span>

        $applicationPoolName = "<application_pool_name>"
        $authorizationFile = "C:\windows\web\powershellwebaccess\data\AuthorizationRules.xml"
        c:\windows\system32\icacls.exe $authorizationFile /grant ('"' + "IIS AppPool\$applicationPoolName" + '":R') > $null

    <span data-ttu-id="ce362-331">Чтобы просмотреть права доступа к файлу авторизации, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ce362-331">To view existing access rights on the authorization file, run the following command:</span></span>

        c:\windows\system32\icacls.exe $authorizationFile

#### <a name="to-use-iis-manager-to-configure-the-gateway-as-a-root-website-with-a-test-certificate"></a><span data-ttu-id="ce362-332">Использование диспетчера служб IIS для настройки шлюза в качестве корневого веб-сайта с тестовым сертификатом</span><span class="sxs-lookup"><span data-stu-id="ce362-332">To use IIS Manager to configure the gateway as a root website with a test certificate</span></span>

1.  <span data-ttu-id="ce362-333">Откройте консоль "Диспетчер служб IIS", выполнив одно из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="ce362-333">Open the IIS Manager console by doing one of the following.</span></span>

    - <span data-ttu-id="ce362-334">На рабочем столе Windows запустите диспетчер серверов, щелкнув **Диспетчер серверов** на панели задач Windows.</span><span class="sxs-lookup"><span data-stu-id="ce362-334">On the Windows desktop, start Server Manager by clicking **Server Manager** in the Windows taskbar.</span></span> <span data-ttu-id="ce362-335">В диспетчере серверов откройте меню **Сервис** и выберите пункт **Диспетчер служб IIS**.</span><span class="sxs-lookup"><span data-stu-id="ce362-335">On the **Tools** menu in Server Manager, click **Internet Information Services (IIS) Manager**.</span></span>

    - <span data-ttu-id="ce362-336">На **начальном** экране Windows введите любую часть имени **Диспетчер служб IIS**.</span><span class="sxs-lookup"><span data-stu-id="ce362-336">On the Windows **Start** screen, type any part of the name **Internet Information Services (IIS) Manager**.</span></span> <span data-ttu-id="ce362-337">Щелкните ярлык, когда он появится в списке результатов **Приложения**.</span><span class="sxs-lookup"><span data-stu-id="ce362-337">Click the shortcut when it is displayed in the **Apps** results.</span></span>

2.  <span data-ttu-id="ce362-338">В области дерева диспетчера служб IIS разверните узел для сервера, на котором установлен компонент Windows PowerShell Web Access, и перейдите к папке **Сайты**.</span><span class="sxs-lookup"><span data-stu-id="ce362-338">In the IIS Manager tree pane, expand the node for the server on which Windows PowerShell Web Access is installed until the **Sites** folder is visible.</span></span> <span data-ttu-id="ce362-339">Выберите папку **Сайты**.</span><span class="sxs-lookup"><span data-stu-id="ce362-339">Select the **Sites** folder.</span></span>

3.  <span data-ttu-id="ce362-340">В области **Действия** щелкните **Добавить веб-сайт**.</span><span class="sxs-lookup"><span data-stu-id="ce362-340">In the **Actions** pane, click **Add Website**.</span></span>

4.  <span data-ttu-id="ce362-341">Введите имя веб-сайта, например **Windows PowerShell Web Access**.</span><span class="sxs-lookup"><span data-stu-id="ce362-341">Type a name for the website, such as **Windows PowerShell Web Access**.</span></span>

5.  <span data-ttu-id="ce362-342">Автоматически создается пул приложений для нового веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="ce362-342">An application pool is automatically created for the new website.</span></span> <span data-ttu-id="ce362-343">Чтобы использовать другой пул приложений, щелкните **Выбрать**, чтобы выбрать пул приложений, связываемый с новым веб-сайтом.</span><span class="sxs-lookup"><span data-stu-id="ce362-343">To use a different application pool, click **Select** to select an application pool to associate with the new website.</span></span> <span data-ttu-id="ce362-344">Выберите другой пул приложений в диалоговом окне **Выбор пула приложений** и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce362-344">Select the alternate application pool in the **Select Application Pool** dialog box, and then click **OK**.</span></span>

6.  <span data-ttu-id="ce362-345">В поле **Физический путь** перейдите к папке %*windir*%/Web/PowerShellWebAccess/wwwroot.</span><span class="sxs-lookup"><span data-stu-id="ce362-345">In the **Physical path** text box, navigate to %*windir*%/Web/PowerShellWebAccess/wwwroot.</span></span>

7.  <span data-ttu-id="ce362-346">В поле **Тип** в области **Привязка** выберите **https**.</span><span class="sxs-lookup"><span data-stu-id="ce362-346">In the **Type** field of the **Binding** area, select **https**.</span></span>

8.  <span data-ttu-id="ce362-347">Назначьте веб-сайту номер порта, который еще не используется другим сайтом или приложением.</span><span class="sxs-lookup"><span data-stu-id="ce362-347">Assign a port number to the website that is not already in use by another site or application.</span></span> <span data-ttu-id="ce362-348">Чтобы найти открытые порты, можно выполнить команду **netstat** в окне командной строки.</span><span class="sxs-lookup"><span data-stu-id="ce362-348">To locate open ports, you can run the **netstat** command in a Command Prompt window.</span></span> <span data-ttu-id="ce362-349">Номер порта по умолчанию: 443.</span><span class="sxs-lookup"><span data-stu-id="ce362-349">The default port number is 443.</span></span>

    <span data-ttu-id="ce362-350">Измените номер порта по умолчанию, если порт 443 уже используется другим веб-сайтом или имеются другие соображения безопасности для изменения номера порта.</span><span class="sxs-lookup"><span data-stu-id="ce362-350">Change the default port if another website is already using 443, or if you have other security reasons for changing the port number.</span></span> <span data-ttu-id="ce362-351">Если выбранный вами порт используется другим веб-сайтом, который выполняется на вашем сервере шлюза, при нажатии кнопки **ОК** выводится предупреждение в диалоговом окне **Добавление веб-сайта**.</span><span class="sxs-lookup"><span data-stu-id="ce362-351">If another website that is running on your gateway server is using your selected port, a warning is displayed when you click **OK** in the **Add Website** dialog box.</span></span> <span data-ttu-id="ce362-352">Для запуска Windows PowerShell Web Access необходимо использовать неиспользуемый порт.</span><span class="sxs-lookup"><span data-stu-id="ce362-352">You must use an unused port to run Windows PowerShell Web Access.</span></span>

9.  <span data-ttu-id="ce362-353">Дополнительно, если требуется для вашей организации, укажите понятное имя узла, например **www.contoso.com**. Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce362-353">Optionally, if needed for your organization, specify a host name that makes sense to your organization and users, such as **www.contoso.com**. Click **OK**.</span></span>

10. <span data-ttu-id="ce362-354">Чтобы обезопасить производственную среду, мы настоятельно рекомендуем предоставить действительный сертификат, подписанный центром сертификации.</span><span class="sxs-lookup"><span data-stu-id="ce362-354">For a more secure production environment, we strongly recommend providing a valid certificate that has been signed by a CA.</span></span> <span data-ttu-id="ce362-355">Вы должны предоставить SSL-сертификат, поскольку пользователи могут подключаться к Windows PowerShell Web Access только по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="ce362-355">You must provide an SSL certificate, because users can only connect to Windows PowerShell Web Access through an HTTPS website.</span></span> <span data-ttu-id="ce362-356">Дополнительные сведения о получении сертификата см. в разделе [Настройка SSL-сертификата в диспетчере служб IIS](#to-configure-an-ssl-certificate-in-iis-Manager) в данной статье.</span><span class="sxs-lookup"><span data-stu-id="ce362-356">See [To configure an SSL certificate in IIS manager](#to-configure-an-ssl-certificate-in-iis-Manager) in this topic for more information about how to obtain a certificate.</span></span>

11. <span data-ttu-id="ce362-357">Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Добавление веб-сайта**.</span><span class="sxs-lookup"><span data-stu-id="ce362-357">Click **OK** to close the **Add Website** dialog box.</span></span>

12. <span data-ttu-id="ce362-358">В сеансе Windows PowerShell, который был открыт с повышенными правами (запуск от имени администратора), выполните следующий сценарий, в котором *application_pool_name* представляет имя пула приложений, созданного на шаге 4, чтобы предоставить пулу приложений права доступа к файлу авторизации.</span><span class="sxs-lookup"><span data-stu-id="ce362-358">In a Windows PowerShell session that has been opened with elevated user rights (Run as Administrator), run the following script, in which *application_pool_name* represents the name of the application pool that you created in step 4, to give the application pool access rights to the authorization file.</span></span>

        $applicationPoolName = "<application_pool_name>"
        $authorizationFile = "C:\windows\web\powershellwebaccess\data\AuthorizationRules.xml"
        c:\windows\system32\icacls.exe $authorizationFile /grant ('"' + "IIS AppPool\$applicationPoolName" + '":R') > $null

    <span data-ttu-id="ce362-359">Чтобы просмотреть права доступа к файлу авторизации, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ce362-359">To view existing access rights on the authorization file, run the following command:</span></span>

        c:\windows\system32\icacls.exe $authorizationFile

13. <span data-ttu-id="ce362-360">Когда новый веб-сайт выбран в панели дерева диспетчера служб IIS, щелкните **Запуск** в панели **Действия** , чтобы запустить веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="ce362-360">With the new website selected in the IIS Manager tree pane, click **Start** in the **Actions** pane to start the website.</span></span>

14. <span data-ttu-id="ce362-361">Откройте сеанс браузера на клиентском устройстве.</span><span class="sxs-lookup"><span data-stu-id="ce362-361">Open a browser session on a client device.</span></span> <span data-ttu-id="ce362-362">Дополнительные сведения о поддерживаемых браузерах и устройствах см. в разделе [Поддержка браузеров и клиентских устройств](#browser-and-client-device-support) в данном документе.</span><span class="sxs-lookup"><span data-stu-id="ce362-362">For more information about supported browsers and devices, see [Browser and client device support](#browser-and-client-device-support) in this document.</span></span>

15. <span data-ttu-id="ce362-363">Откройте новый веб-сайт Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-363">Open the new Windows PowerShell Web Access website.</span></span>

    <span data-ttu-id="ce362-364">Так как корневой веб-сайт указывает на папку Windows PowerShell Web Access, то если открыть в браузере адрес **https://\<*имя_сервера_шлюза*\>**, появится страница входа Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-364">Because the root website points to the Windows PowerShell Web Access folder, the browser should display the Windows PowerShell Web Access sign-in page when you open **https://\<*gateway_server_name*\>**.</span></span> <span data-ttu-id="ce362-365">Нет необходимости добавлять **/pswa** в URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="ce362-365">You should not need to add **/pswa** to the URL.</span></span>

    ><span data-ttu-id="ce362-366">**![Примечание](images/note.jpeg) Note**</span><span class="sxs-lookup"><span data-stu-id="ce362-366">**![Note](images/note.jpeg) Note**</span></span> 
    > 
    ><span data-ttu-id="ce362-367">Вы не можете выполнить вход до предоставления пользователям доступа к веб-сайту с помощью добавления прав авторизации.</span><span class="sxs-lookup"><span data-stu-id="ce362-367">You cannot sign in until users have been granted access to the website by adding authorization rules.</span></span> 
    ><span data-ttu-id="ce362-368">Дополнительные сведения см. в разделе [Настройка ограничивающего правила авторизации](#configure-a-restrictive-authorization-rule) в этой статье и [Правила авторизации и средства безопасности Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-368">For more information, see [Configure a restrictive authorization rule](#configure-a-restrictive-authorization-rule), in this topic, and [Authorization Rules and Security Features of Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span></span>

### <a name="configure-a-restrictive-authorization-rule"></a><span data-ttu-id="ce362-369">Настройка ограничивающего правила авторизации</span><span class="sxs-lookup"><span data-stu-id="ce362-369">Configure a restrictive authorization rule</span></span>

<span data-ttu-id="ce362-370">После установки Windows PowerShell Web Access и настройки шлюза пользователи могут открывать страницу входа в браузере, но они не могут выполнить вход, пока администратор Windows PowerShell Web Access не предоставит им доступ в явном виде.</span><span class="sxs-lookup"><span data-stu-id="ce362-370">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span> <span data-ttu-id="ce362-371">Управление доступом в Windows PowerShell Web Access осуществляется с помощью набора командлетов Windows PowerShell, описанных в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="ce362-371">Windows PowerShell Web Access access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span> <span data-ttu-id="ce362-372">Нет соответствующего графического пользовательского интерфейса для добавления правил авторизации или управления ими.</span><span class="sxs-lookup"><span data-stu-id="ce362-372">There is no comparable GUI for adding or managing authorization rules.</span></span> <span data-ttu-id="ce362-373">Подробные сведения о командлетах Windows PowerShell Web Access см. в справочных разделах по командлетам в статье [Командлеты Windows PowerShell Web Access](cmdlets/web-access-cmdlets.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-373">For more detailed information about Windows PowerShell Web Access cmdlets, see the cmdlet reference topics, [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md).</span></span>

<span data-ttu-id="ce362-374">Дополнительные сведения о безопасности и правилах авторизации Windows PowerShell Web Access см. в разделе [Правила авторизации и средства безопасности Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-374">For more detail about Windows PowerShell Web Access authorization rules and security, see [Authorization Rules and Security Features of Windows PowerShell Web Access](authorization-rules-and-security-features-of-windows-powershell-web-access.md).</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="ce362-375">Добавление ограничивающего правила авторизации</span><span class="sxs-lookup"><span data-stu-id="ce362-375">To add a restrictive authorization rule</span></span>

1.  <span data-ttu-id="ce362-376">Выполните одно из следующих действий, чтобы открыть сеанс Windows PowerShell с повышенными правами.</span><span class="sxs-lookup"><span data-stu-id="ce362-376">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

    - <span data-ttu-id="ce362-377">На рабочем столе Windows щелкните правой кнопкой мыши **Windows PowerShell** на панели задач и выберите команду **Запустить от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="ce362-377">On the Windows desktop, right-click **Windows PowerShell** on the taskbar, and then click **Run as Administrator**.</span></span>

    - <span data-ttu-id="ce362-378">На **начальном экране** Windows щелкните правой кнопкой мыши **Windows PowerShell**, а затем выберите команду **Запустить от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="ce362-378">On the Windows **Start** screen, right-click **Windows PowerShell**, and then click **Run as Administrator**.</span></span>

2.  ![Примечание о безопасности](images/SecurityNote.jpeg) <span data-ttu-id="ce362-380">Необязательный шаг для ограничения пользовательского доступа путем использования конфигураций сеансов:</span><span class="sxs-lookup"><span data-stu-id="ce362-380">Optional step for restricting user access by using session configurations:</span></span>

    <span data-ttu-id="ce362-381">Убедитесь, что конфигурации сеансов, которые требуется использовать в правилах, уже существуют.</span><span class="sxs-lookup"><span data-stu-id="ce362-381">Verify that session configurations that you want to use in your rules already exist.</span></span> <span data-ttu-id="ce362-382">В противном случае выполните инструкции по созданию конфигураций сеансов, приведенные в статье [about_Session_Configuration_Files](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_session_configurations).</span><span class="sxs-lookup"><span data-stu-id="ce362-382">If they have not yet been created, use instructions for creating session configurations in [about_Session_Configuration_Files](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_session_configurations).</span></span>

3.  <span data-ttu-id="ce362-383">Введите следующую команду и нажмите клавишу **ВВОД**.</span><span class="sxs-lookup"><span data-stu-id="ce362-383">Type the following, and then press **Enter**.</span></span>

        Add-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName <computer_name> -ConfigurationName <session_configuration_name>

    <span data-ttu-id="ce362-384">Это правило авторизации разрешает конкретному пользователю доступ к одному сетевому компьютеру, к которому обычно требуется доступ, с доступом к конкретной конфигурации сеанса, область которого соответствует потребностям пользовательских сценариев и командлетов.</span><span class="sxs-lookup"><span data-stu-id="ce362-384">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the userâ€™s typical scripting and cmdlet needs.</span></span> 
    
    <span data-ttu-id="ce362-385">В следующем примере пользователю с именем `JSmith` в домене `Contoso` предоставляется доступ для управления компьютером `Contoso_214` и использования конфигурации сеанса с именем `NewAdminsOnly`.</span><span class="sxs-lookup"><span data-stu-id="ce362-385">In the following example, a user named `JSmith` in the `Contoso` domain is granted access to manage the computer `Contoso_214`, and use a session configuration named `NewAdminsOnly`.</span></span>

        Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly

4.  <span data-ttu-id="ce362-386">Убедитесь, что правило было создано, выполнив командлет `Get-PswaAuthorizationRule` или `Test-PswaAuthorizationRule -UserName '<domain\user>' -ComputerName <computer-name>`.</span><span class="sxs-lookup"><span data-stu-id="ce362-386">Verify that the rule has been created by running either the `Get-PswaAuthorizationRule` cmdlet, or `Test-PswaAuthorizationRule -UserName '<domain\user>' -ComputerName <computer-name>`.</span></span> 

    <span data-ttu-id="ce362-387">Например, `Test-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214`.</span><span class="sxs-lookup"><span data-stu-id="ce362-387">For example, `Test-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214`.</span></span>

<span data-ttu-id="ce362-388">После настройки правила авторизации авторизованные пользователи могут выполнить вход в веб-консоль и приступить к использованию Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-388">After you have configured an authorization rule, you are ready for authorized users to sign in to the web-based console and begin using Windows PowerShell Web Access.</span></span>

## <a name="configure-a-genuine-certificate"></a><span data-ttu-id="ce362-389">Настройка подлинного сертификата</span><span class="sxs-lookup"><span data-stu-id="ce362-389">Configure a genuine certificate</span></span>

<span data-ttu-id="ce362-390">Для безопасной производственной среды следует всегда использовать действительный сертификат SSL, подписанный центром сертификации (ЦС).</span><span class="sxs-lookup"><span data-stu-id="ce362-390">For a secure production environment, always use a valid SSL certificate that has been signed by a certification authority (CA).</span></span> <span data-ttu-id="ce362-391">В этом разделе описано, как получить и установить действительный SSL-сертификат от центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="ce362-391">The procedure in this section describes how to obtain and apply a valid SSL certificate from a CA.</span></span>

### <a name="to-configure-an-ssl-certificate-in-iis-manager"></a><span data-ttu-id="ce362-392">Настройка SSL-сертификата в диспетчере служб IIS</span><span class="sxs-lookup"><span data-stu-id="ce362-392">To configure an SSL certificate in IIS Manager</span></span>

1.  <span data-ttu-id="ce362-393">В области дерева диспетчера служб IIS выберите сервер, на котором установлен компонент Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-393">In the IIS Manager tree pane, select the server on which Windows PowerShell Web Access is installed.</span></span>

2.  <span data-ttu-id="ce362-394">В области содержимого дважды щелкните **Сертификаты сервера**.</span><span class="sxs-lookup"><span data-stu-id="ce362-394">In the content pane, double click **Server Certificates**.</span></span>

3.  <span data-ttu-id="ce362-395">В области **Действия** выполните одно из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="ce362-395">In the **Actions** pane, do one of the following.</span></span> <span data-ttu-id="ce362-396">Дополнительные сведения о настройке сертификатов сервера в IIS см. в статье [Настройка сертификатов сервера в службах IIS 7](https://technet.microsoft.com/library/cc732230.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce362-396">For more information about configuring server certificates in IIS, see [Configuring Server Certificates in IIS 7](https://technet.microsoft.com/library/cc732230.aspx).</span></span>

    - <span data-ttu-id="ce362-397">Щелкните **Импорт**, чтобы импортировать имеющийся действительный сертификат из расположения в вашей сети.</span><span class="sxs-lookup"><span data-stu-id="ce362-397">Click **Import** to import an existing, valid certificate from a location on your network.</span></span>

    - <span data-ttu-id="ce362-398">Щелкните **Создать запрос сертификата**, чтобы запросить сертификат из центра сертификации, например из [VeriSign](http://www.verisign.com/), [Thawte](https://www.thawte.com/) или [GeoTrust](https://www.geotrust.com/).</span><span class="sxs-lookup"><span data-stu-id="ce362-398">Click **Create Certificate Request** to request a certificate from a CA such as [VeriSign](http://www.verisign.com/), [Thawte](https://www.thawte.com/), or [GeoTrust](https://www.geotrust.com/).</span></span> <span data-ttu-id="ce362-399">Общее имя сертификата должно совпадать с заголовком узла в запросе.</span><span class="sxs-lookup"><span data-stu-id="ce362-399">The certificate's common name must match the host header in the request.</span></span>

      <span data-ttu-id="ce362-400">Например, если браузер клиента запрашивает http://www.contoso.com/, общим именем также должно быть http://www.contoso.com/.</span><span class="sxs-lookup"><span data-stu-id="ce362-400">For example, if the client browser requests http://www.contoso.com/, then the common name must also be http://www.contoso.com/.</span></span> <span data-ttu-id="ce362-401">Это самый безопасный и рекомендуемый вариант предоставления сертификата для шлюза Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="ce362-401">This is the most secure and recommended option for providing the Windows PowerShell Web Access gateway with a certificate.</span></span>

    - <span data-ttu-id="ce362-402">Щелкните **Создать самозаверяющий сертификат**, чтобы создать сертификат, который можно использовать немедленно, а при необходимости подписать в ЦС позже.</span><span class="sxs-lookup"><span data-stu-id="ce362-402">Click **Create a Self-Signed Certificate** to create a certificate that you can use immediately, and have signed later by a CA if desired.</span></span> <span data-ttu-id="ce362-403">Введите понятное имя самозаверяющего сертификата, например **Windows PowerShell Web Access**.</span><span class="sxs-lookup"><span data-stu-id="ce362-403">Specify a friendly name for the self-signed certificate, such as **Windows PowerShell Web Access**.</span></span> <span data-ttu-id="ce362-404">Этот вариант не считается безопасным и рекомендуется только для частной тестовой среды.</span><span class="sxs-lookup"><span data-stu-id="ce362-404">This option is not considered secure, and is recommended only for a private test environment.</span></span>

4.  <span data-ttu-id="ce362-405">После создания или получения сертификата выберите веб-сайт, к которому применяется сертификат (например, **Веб-сайт по умолчанию**) в области дерева диспетчера служб IIS, а затем щелкните **Привязки** в области **Действия**.</span><span class="sxs-lookup"><span data-stu-id="ce362-405">After creating or obtaining a certificate, select the website to which the certificate is applied (for example, **Default Web Site**) in the IIS Manager tree pane, and then click **Bindings** in the **Actions** pane.</span></span>

5.  <span data-ttu-id="ce362-406">В диалоговом окне **Добавление привязки сайта** добавьте привязку **https** для сайта, если такая привязка еще не отображается.</span><span class="sxs-lookup"><span data-stu-id="ce362-406">In the **Add Site Binding** dialog box, add an **https** binding for the site, if one is not already displayed.</span></span> <span data-ttu-id="ce362-407">Если вы не используете самозаверяющий сертификат, укажите имя узла из шага 3 данной процедуры.</span><span class="sxs-lookup"><span data-stu-id="ce362-407">If you are not using a self-signed certificate, specify the host name from step 3 of this procedure.</span></span> <span data-ttu-id="ce362-408">Если вы используете самозаверяющий сертификат, этот шаг не требуется.</span><span class="sxs-lookup"><span data-stu-id="ce362-408">If you are using a self-signed certificate, this step is not required.</span></span>

6.  <span data-ttu-id="ce362-409">Выберите сертификат, полученный или созданный на шаге 3 данной процедуры, и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce362-409">Select the certificate that you obtained or created in step 3 of this procedure, and then click **OK**.</span></span>

## <a name="using-the-web-based-windows-powershell-console"></a><span data-ttu-id="ce362-410">Использование веб-консоли Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="ce362-410">Using the web-based Windows PowerShell console</span></span>

<span data-ttu-id="ce362-411">После установки Windows PowerShell Web Access и завершения настройки шлюза, описанной в этой статье, веб-консоль Windows PowerShell готова к использованию.</span><span class="sxs-lookup"><span data-stu-id="ce362-411">After Windows PowerShell Web Access is installed and the gateway configuration is finished as described in this topic, the Windows PowerShell web-based console is ready to use.</span></span> <span data-ttu-id="ce362-412">Дополнительные сведения о начале работы с веб-консолью см. в статье [Использование веб-консоли Windows PowerShell](use-the-web-based-windows-powershell-console.md).</span><span class="sxs-lookup"><span data-stu-id="ce362-412">For more information about getting started in the web-based console, see [Use the Web-based Windows PowerShell Console](use-the-web-based-windows-powershell-console.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="ce362-413">См. также</span><span class="sxs-lookup"><span data-stu-id="ce362-413">See Also</span></span>

- [<span data-ttu-id="ce362-414">Документация по Internet Information Services (IIS) 7.0</span><span class="sxs-lookup"><span data-stu-id="ce362-414">Internet Information Services (IIS) 7.0 Documentation</span></span>](https://technet.microsoft.com/library/cc753433.aspx)
- [<span data-ttu-id="ce362-415">Справка по диспетчеру IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="ce362-415">IIS Manager 7.0 Help</span></span>](https://technet.microsoft.com/library/cc732664.aspx)
- [<span data-ttu-id="ce362-416">Настройка безопасности веб-сервера (IIS 7)</span><span class="sxs-lookup"><span data-stu-id="ce362-416">Configure Web Server Security (IIS 7)</span></span>](https://technet.microsoft.com/library/cc731278.aspx)
- [<span data-ttu-id="ce362-417">Ресурсы развертывания IPsec</span><span class="sxs-lookup"><span data-stu-id="ce362-417">IPsec Deployment Resources</span></span>](https://technet.microsoft.com/network/bb531150)
