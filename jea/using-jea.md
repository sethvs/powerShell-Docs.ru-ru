---
description: 
manager: dongill
ms.topic: article
author: jpjofre
ms.prod: powershell
keywords: powershell,cmdlet,jea
ms.date: 2016-06-22
title: "использование jea"
ms.technology: powershell
ms.sourcegitcommit: 7504fe496a8913718847e45115d126caf4049bef
ms.openlocfilehash: 3bac5932c3ed57713bdb08e3a9ed435b228518bc

---

# Использование JEA
Этот раздел посвящен *взаимодействию* конечных пользователей с JEA.
В разделе предварительных требований вы создали демонстрационную конечную точку JEA.
На ее примере мы покажем вам JEA в действии.
В последующих разделах руководство будет работать в обратном направлении — вы познакомитесь с действиями и файлами, обеспечивающими взаимодействие с конечным пользователем.

## Использование JEA без прав администратора
Чтобы увидеть, как работает JEA, потребуется работать с удаленным взаимодействием PowerShell как пользователь, не имеющий прав администратора.
В новом окне PowerShell выполните следующую команду:   

```PowerShell
$NonAdminCred = Get-Credential
```

По запросу введите учетные данные пользователя без прав администратора.
Если вы выполнили указания из раздела [Настройка пользователей и групп](creating-a-domain-controller.md#set-up-users-and-groups), это будут следующие учетные данные:
-   Имя пользователя: OperatorUser
-   Пароль: pa$$w0rd

Затем выполните следующую команду, чтобы подключиться к демонстрационной конечной точке, используя указанные учетные данные:

```PowerShell
Enter-PSSession -ComputerName . -ConfigurationName JEA_Demo -Credential $NonAdminCred
```

Вы вошли в интерактивный удаленный сеанс PowerShell на локальном компьютере.
С помощью параметра "Credential" вы подключились *как* OperatorUser (или по другой указанной вами учетной записи).
Изменение командной строки на `[localhost]: PS>` означает, чтобы вы работаете в удаленном сеансе.  

В удаленной командной строке выполните следующую команду, чтобы отобразить список доступных команд:

```PowerShell
Get-Command
```

Как вы видите, это весьма ограниченный набор команд по сравнению с теми, которые доступны в обычном окне PowerShell (нередко в него входит несколько тысяч команд).
В частности, он включает только семь командлетов JEA по умолчанию (Clear-Host, Exit-PSSession, Get-Command, Get-FormatData, Get-Help, Measure-Object, Out-Default, Select-Object) и две команды, отдельно добавленные в файл возможностей для роли обслуживания.

Теперь посмотрим, в каком пользовательском контексте осуществляется этот сеанс, вызвав пользовательскую функцию, включенную в файл возможностей для роли обслуживания:

```PowerShell
Get-UserInfo
```

Выходные данные этой функции содержат пользователей ConnectedUser и RunAsUser.
Подключенный пользователь (ConnectedUser) — это учетная запись, подключенная к удаленному сеансу (например, ваша учетная запись).
Подключенному пользователю права администратора не требуются.
Учетная запись RunAsUser — это учетная запись, которая фактически выполняет привилегированные действия.
За счет подключения в качестве одного пользователя и выполнения действий от имени привилегированного пользователя обычным пользователям дается возможность выполнять определенные административные задачи без предоставления прав администратора.

Чтобы увидеть, как это работает, выполните следующую команду:

```PowerShell
Restart-Service -Name Spooler -Verbose
```

Обычно для выполнения командлета Restart-Service требуются права администратора.
Но с виртуальной учетной записью JEA его можно выполнять по учетным данным непривилегированных пользователей.

Таким образом, JEA позволяет работать, используя уже знакомые вам команды.
Но что насчет команд, которые должны быть вам *недоступны*?
Попробуйте выполнить в сеансе JEA другую команду, например `Restart-Computer`, и вы увидите, что JEA не позволяет выполнять такие команды.

```PowerShell
[localhost]: PS> Restart-Computer
The term 'Restart-Computer' is not recognized as the name of a cmdlet, function, script file, or
operable program. Check the spelling of the name, or if a path was included, verify that the path
is correct and try again.
    + CategoryInfo          : ObjectNotFound: (Restart-Computer:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
```

Наконец, чтобы покинуть ограниченную конечную точку JEA, выполните следующую команду:

```PowerShell
Exit-PSSession
```

Она отключит вас от удаленного сеанса PowerShell.




<!--HONumber=Jun16_HO4-->


