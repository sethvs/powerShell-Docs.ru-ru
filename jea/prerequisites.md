---
manager: carmonm
ms.topic: article
author: rpsqrd
ms.author: ryanpu
ms.prod: powershell
keywords: powershell,cmdlet,jea
ms.date: 2017-03-07
title: "Предварительные условия JEA"
ms.technology: powershell
ms.openlocfilehash: a38c9e948190b9384c62eec3e40758a782c9f72b
ms.sourcegitcommit: 6057e6d22ef8a2095af610e0d681e751366a9773
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2017
---
# <a name="prerequisites"></a>Необходимые компоненты

> Область применения: Windows PowerShell 5.0

Just Enough Administration — это функция, входящая в состав Windows PowerShell 5.0 и более поздних версий.
В этом разделе описываются предварительные условия, которые нужно выполнить, чтобы начать работу с JEA.

## <a name="install-jea"></a>Установка JEA

Функция JEA доступна в Windows PowerShell 5.0 и более поздних версий, но для обеспечения полной функциональности рекомендуется установить последнюю версию PowerShell, доступную для вашей системы.
В следующей таблице описывается доступность JEA на Windows Server:

операционная система сервера   | Доступность JEA
--------------------------|--------------------------------
Windows Server 2016       | Предустанавливается
Windows Server 2012 R2    | Полный набор функций с WMF 5.1
Windows Server 2012       | Полный набор функций с WMF 5.1
Windows Server 2008 R2    | Ограниченная функциональность<sup>1</sup> с WMF 5.1

Вы можете также использовать JEA на домашнем или рабочем компьютере:

клиентская операционная система   | Доступность JEA
--------------------------|-----------------------------------------------------
Windows 10 1607+          | Предустанавливается
Windows 10 1603, 1511     | Предустанавливается, с неполной функциональностью<sup>2</sup>
Windows 10 1507           | Недоступно
Windows 8, 8.1            | Полный набор функций с WMF 5.1
Windows 7                 | Ограниченная функциональность<sup>1</sup> с WMF 5.1

<sup>1</sup> JEA нельзя настроить для использования групповых управляемых учетных записей служб в операционных системах Windows Server 2008 R2 или Windows 7.
Виртуальные учетные записи и другие возможности JEA *поддерживаются*.

<sup>2</sup> Версии 1511 и 1603 Windows 10 не поддерживают следующие функции JEA: запуск в качестве групповой управляемой учетной записи службы, правила условного доступа в конфигурациях сеанса, диск пользователя и предоставление разрешений для учетных записей локальных пользователей.
Для обеспечения поддержки этих функций выполните обновление Windows до версии 1607 (юбилейное обновление) или более поздней.

### <a name="check-which-version-of-powershell-is-installed"></a>Определение установленной версии PowerShell

Чтобы узнать, какая версия PowerShell установлена на компьютере, проверьте переменную `$PSVersionTable` в командной строке Windows PowerShell.

```powershell
PS C:\> $PSVersionTable.PSVersion

Major  Minor  Build  Revision
-----  -----  -----  --------
5      1      14393  1000
```

Вы готовы к использованию JEA, если *основной* номер версии больше или равен **5**.
Для получения наилучших результатов и доступа к новейшим возможностям рекомендуется обновить PowerShell до версии **5.1**, когда это возможно.

### <a name="install-windows-management-framework"></a>Установка Windows Management Framework

Если вы используете более старую версию PowerShell, потребуется установить в системе последнее обновление Windows Management Framework (WMF).
Пакеты обновлений и ссылка на актуальные заметки о выпуске WMF доступны в [Центре загрузки](https://aka.ms/WMF5).

Настоятельно рекомендуется проверить совместимость рабочей нагрузки с WMF до обновления всех серверов.

Пользователям Windows 10 нужно установить последние обновления компонентов для получения текущей версии Windows PowerShell.

## <a name="enable-powershell-remoting"></a>Включение удаленного взаимодействия PowerShell

Удаленное взаимодействие PowerShell предоставляет собой основу, на которой построена функция JEA.
Поэтому перед использованием JEA необходимо включить удаленное взаимодействие PowerShell и [должным образом защитить](https://msdn.microsoft.com/en-us/powershell/scripting/setup/winrmsecurity) его в своей системе.

В Windows Server 2012, 2012 R2 и 2016 удаленное взаимодействие PowerShell включено по умолчанию.
Удаленное взаимодействие PowerShell можно включить, выполнив приведенную ниже команду в окне PowerShell с повышенными привилегиями.

```powershell
Enable-PSRemoting
```

## <a name="enable-powershell-module-and-script-block-logging-optional"></a>Включение ведения журнала для блока сценариев и модуля PowerShell (необязательно)

Указанные ниже действия позволят включить ведение журнала действий PowerShell в вашей системе.
Ведение журнала модуля PowerShell не является обязательным для JEA, однако настоятельно рекомендуется включить его, чтобы выполняемые пользователями команды регистрировались в центральном расположении.

Политику ведения журнала модуля PowerShell можно настроить с помощью групповой политики.

1. Откройте редактор локальных групповых политик на рабочей станции или объект групповой политики в консоли управления групповыми политиками на контроллере домена Active Directory.
2. Откройте папку **Конфигурация компьютера\\Административные шаблоны\\Компоненты Windows\\Windows PowerShell**.
3. Дважды щелкните пункт **Включить ведение журнала модулей**.
4. Нажмите кнопку **Включено**.
5. В разделе "Параметры" нажмите кнопку **Показать** рядом с именами модулей.
6. Введите "**\***" во всплывающем окне. Это означает, что PowerShell будет регистрировать в журнале команды из всех модулей.
7. Нажмите кнопку **ОК** для применения политики.
8. Дважды щелкните **Включить регистрацию блоков сценариев PowerShell**.
9. Нажмите кнопку **Включено**.
10. Нажмите кнопку **ОК** для применения политики.
11. Запустите **gpupdate** или дождитесь обработки обновленной политики и применения этих параметров групповой политикой (только на компьютерах, присоединенных к домену).

С помощью групповой политики также можно включить запись действий PowerShell в масштабе всей системы.

## <a name="next-steps"></a>Дальнейшие действия

- [Создание файла возможностей ролей](role-capabilities.md)
- [Создание файла конфигурации сеанса](session-configurations.md)

## <a name="see-also"></a>См. также:

- [Дополнительные сведения о безопасности удаленного взаимодействия PowerShell и WinRM](https://msdn.microsoft.com/en-us/powershell/scripting/setup/winrmsecurity)
- [Запись блога *PowerShell ♥ the Blue Team* по безопасности](https://blogs.msdn.microsoft.com/powershell/2015/06/09/powershell-the-blue-team/)
